import{j as e}from"./vendor-ui-DJm-zmnP.js";import{c as g,t as j,ak as y,Q as s,C as k,a1 as v,i as N,B as n,g as C,u as I,a4 as z,o as S,ae as L,U as O,S as b,am as V,al as B}from"./index-CLvpp2UE.js";import{O as P,c as w}from"./cluny-logo-8QEDrvoN.js";import{a as T}from"./vendor-query-CX8ZYlKb.js";import{r as u}from"./vendor-react-Bzsngnqy.js";import{u as _}from"./websocket-Bxdgjfcq.js";import{C as q}from"./customer-footer-DFb6iF4V.js";import{K as R}from"./key-round-BfPQAVEt.js";import"./vendor-utils-BKCsaWdX.js";import"./circle-check-CNDbPLNF.js";const f="/assets/banner-1-D7VBwTZv.png",U="/assets/banner-2-JBC59czl.png";function A(){const[,o]=g(),{customer:r}=j(),[l,m]=u.useState(!1),[t,x]=u.useState("");u.useEffect(()=>{if(r?.phone)x(r.phone);else{const i=["qahwa-customer-profile","qahwa-customer","currentCustomer"];for(const a of i){const d=localStorage.getItem(a);if(d)try{const p=JSON.parse(d);if(p?.phone){x(p.phone);break}}catch{}}}m(!1)},[r]);const{data:h=[]}=T({queryKey:["/api/orders/customer",t],enabled:!!t&&!l,refetchInterval:1e4,queryFn:async()=>{if(!t)return[];const i=await fetch(`/api/orders/customer/${encodeURIComponent(t)}`);return i.ok?i.json():[]}}),c=h.find(i=>i.status!=="completed"&&i.status!=="cancelled");return!c||l?null:e.jsx(y,{children:e.jsx(s.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:100},className:"fixed top-0 left-0 right-0 z-50 p-4",children:e.jsxs(k,{className:"max-w-4xl mx-auto bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 shadow-xl relative",children:[e.jsx("button",{onClick:()=>m(!0),className:"absolute top-2 left-2 p-1 rounded-full hover:bg-amber-100 transition-colors z-10","aria-label":"إغلاق",children:e.jsx(v,{className:"w-5 h-5 text-amber-700"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-amber-700"}),e.jsx("h3",{className:"font-bold text-amber-900",children:"طلبك الحالي"})]}),e.jsxs(n,{size:"sm",variant:"ghost",onClick:()=>o("/my-orders"),className:"text-amber-700 hover:text-amber-900 hover:bg-amber-100",children:["عرض التفاصيل",e.jsx(C,{className:"w-4 h-4 mr-2"})]})]}),e.jsx(P,{order:c,compact:!0})]})]})})})}function Y(){const[,o]=g(),{customer:r,isAuthenticated:l,logout:m}=j(),{t,i18n:x}=I(),[h,c]=u.useState(null);_({clientType:"customer",customerId:r?.id,onPointsVerificationCode:a=>{c(a),setTimeout(()=>c(null),5*60*1e3)},enabled:!!r?.id});const i=[{icon:N,title:t("welcome.specialty"),desc:t("welcome.specialty_desc"),color:"from-primary to-primary/70"},{icon:z,title:t("welcome.luxury"),desc:t("welcome.luxury_desc"),color:"from-accent to-accent/70"},{icon:S,title:t("welcome.locations"),desc:t("welcome.locations_desc"),color:"from-primary to-accent"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-primary/5 text-foreground overflow-hidden font-ibm-arabic",children:[e.jsxs("div",{className:"relative min-h-[100dvh] flex flex-col",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:f,alt:"Coffee Background",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/70"})]}),e.jsxs("div",{className:"absolute inset-0 z-10 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 right-10 w-20 h-20 bg-primary/20 rounded-full blur-2xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-40 left-10 w-32 h-32 bg-accent/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),e.jsxs("header",{className:"relative z-20 flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white/20 backdrop-blur-xl p-1 border border-white/30",children:e.jsx("img",{src:w,alt:"Logo",className:"w-full h-full object-contain rounded-xl"})}),e.jsx("span",{className:"text-white font-bold text-lg tracking-wide",children:"CLUNY"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{children:h&&e.jsxs(s.div,{initial:{opacity:0,scale:.9,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:20},className:"bg-accent/90 backdrop-blur-md border border-white/20 rounded-xl p-2 px-3 flex items-center gap-3 shadow-xl",children:[e.jsx("div",{className:"bg-white/20 p-1.5 rounded-lg",children:e.jsx(R,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-white/70 leading-none",children:"رمز التحقق"}),e.jsx("span",{className:"text-lg font-bold text-white leading-none tracking-widest",children:h.code})]}),e.jsx("button",{onClick:()=>c(null),className:"text-white/50 hover:text-white p-1",children:e.jsx(v,{className:"w-4 h-4"})})]})}),l&&e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>m(),className:"h-10 w-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>{const a=localStorage.getItem("qahwa-customer")||localStorage.getItem("currentCustomer");o(l||r||a?"/profile":"/auth")},className:"h-10 w-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20","data-testid":"button-user-profile",children:e.jsx(O,{className:"w-5 h-5 text-white"})})]})]}),e.jsx("div",{className:"absolute top-4 left-4 z-30",children:e.jsx(A,{})}),e.jsx("div",{className:"flex-1 flex flex-col justify-center items-center px-6 relative z-20",children:e.jsxs(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center max-w-lg",children:[e.jsx(s.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"w-28 h-28 mx-auto mb-8 rounded-2xl overflow-hidden backdrop-blur-xl p-2 border border-white/20 shadow-xl bg-[#a7b0b1]/30",children:e.jsx("img",{src:w,alt:"Logo",className:"w-full h-full object-contain rounded-2xl"})}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-3 text-white drop-shadow-lg",children:t("app.name")}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[e.jsx(b,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-white/80 text-lg tracking-wider",children:t("app.tagline")}),e.jsx(b,{className:"w-4 h-4 text-primary"})]})]}),l?e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mb-10",children:[e.jsx("p",{className:"text-white text-2xl mb-2 font-semibold",children:t("welcome.greeting",{name:r?.name})}),e.jsx("p",{className:"text-white/70 text-base",children:t("welcome.missed_you")})]}):e.jsx(s.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-white/80 text-xl mb-10",children:t("welcome.stories")}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"space-y-3",children:[e.jsxs(n,{onClick:()=>o("/menu"),className:"w-full h-14 bg-primary hover:bg-primary/90 text-white rounded-2xl text-lg font-bold shadow-xl shadow-primary/30 transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]",children:[t(l?"menu.order_now":"welcome.explore"),x.language==="ar"?e.jsx(V,{className:"mr-2 w-5 h-5"}):e.jsx(B,{className:"ml-2 w-5 h-5"})]}),l?e.jsx(n,{variant:"outline",onClick:()=>o("/profile"),className:"w-full h-14 bg-white/10 backdrop-blur-md border-white/30 text-white rounded-2xl text-lg hover:bg-white/20",children:t("welcome.my_account")}):e.jsx(n,{variant:"outline",onClick:()=>o("/auth"),className:"w-full h-14 bg-white/10 backdrop-blur-md border-white/30 text-white rounded-2xl text-lg hover:bg-white/20",children:t("welcome.login")})]})]})}),e.jsx(s.div,{animate:{y:[0,8,0]},transition:{duration:2,repeat:1/0},className:"relative z-20 pb-8 text-center",children:e.jsx("div",{className:"w-6 h-10 mx-auto border-2 border-white/30 rounded-full flex justify-center pt-2",children:e.jsx("div",{className:"w-1.5 h-3 bg-white/50 rounded-full"})})})]}),e.jsx("section",{className:"py-20 px-6 bg-gradient-to-b from-white to-slate-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-3",children:t("welcome.why")}),e.jsx("p",{className:"text-muted-foreground",children:t("welcome.experience")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map((a,d)=>e.jsxs(s.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:d*.15},viewport:{once:!0},className:"bg-white rounded-2xl p-6 shadow-lg border border-border hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:`w-14 h-14 mb-4 flex items-center justify-center rounded-xl bg-gradient-to-br ${a.color}`,children:e.jsx(a.icon,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:a.title}),e.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:a.desc})]},d))})]})}),e.jsx("section",{className:"py-16 px-6 bg-slate-50",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(s.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"rounded-2xl overflow-hidden shadow-lg",children:e.jsx("img",{src:f,alt:"Coffee",className:"w-full h-48 object-cover"})}),e.jsx(s.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"rounded-2xl overflow-hidden shadow-lg",children:e.jsx("img",{src:U,alt:"Coffee",className:"w-full h-48 object-cover"})})]})})}),e.jsx(q,{})]})}export{Y as default};
