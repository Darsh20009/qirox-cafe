import{j as e}from"./vendor-ui-DJm-zmnP.js";import{r as m}from"./vendor-react-Bzsngnqy.js";import{a as u,b as W}from"./vendor-query-CX8ZYlKb.js";import{e as z,c as P,B as l,g as A,C as a,f as r,x as j,y as p,W as g,L as o,I as f,v as H,N as K}from"./index-61RjstaY.js";import{S as N,a as y,b,c as v,d as c}from"./select-BgcBxbEj.js";import{W as C}from"./warehouse-CvmXY72P.js";import{L as M}from"./layout-dashboard-Bq1_JRv7.js";import{C as V}from"./chart-column-D4sTeF6j.js";import{S as B}from"./send-DzpZUzYE.js";import{H as D}from"./history-BiYVo1q8.js";import{P as E}from"./package-equujGSd.js";import"./vendor-utils-BKCsaWdX.js";import"./chevron-down-BsuQiE4E.js";function se(){const{toast:w}=z(),[,S]=P(),[I,k]=m.useState(""),[q,L]=m.useState(""),[t,x]=m.useState([{ingredientId:"",quantity:0,unit:"g"}]),{data:i=[]}=u({queryKey:["/api/warehouses"]}),{data:n=[]}=u({queryKey:["/api/branches"]}),T=W({mutationFn:async s=>(await H("POST","/api/warehouses/transfer",s)).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/warehouses"]}),w({title:"تم بدء عملية التحويل بنجاح",className:"bg-green-600 text-white"})}});return e.jsxs("div",{className:"p-6 space-y-6 bg-background min-h-screen",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>S("/manager"),className:"hover:bg-primary/10",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"إدارة المستودعات المركزية"}),e.jsx("p",{className:"text-muted-foreground",children:"تتبع المخزون وإدارة التحويلات بين الفروع والمخازن"})]}),e.jsx(C,{className:"h-10 w-10 text-primary mr-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(a,{className:"bg-primary/5 border-primary/20",children:e.jsxs(r,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-full bg-primary/10",children:e.jsx(C,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي المستودعات"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length||0})]})]})}),e.jsx(a,{className:"bg-green-500/5 border-green-500/20",children:e.jsxs(r,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-500/10",children:e.jsx(M,{className:"w-6 h-6 text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"الفروع النشطة"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length||0})]})]})}),e.jsx(a,{className:"bg-background0/5 border-amber-500/20",children:e.jsxs(r,{className:"p-6 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-full bg-background0/10",children:e.jsx(V,{className:"w-6 h-6 text-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"تحويلات معلقة"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-xl",children:[e.jsx(B,{className:"w-5 h-5 text-primary"})," طلب تحويل جديد"]}),e.jsx(g,{children:"نقل المواد الخام بين المستودعات والفروع"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"من مستودع"}),e.jsxs(N,{onValueChange:k,children:[e.jsx(y,{children:e.jsx(b,{placeholder:"اختر المصدر"})}),e.jsxs(v,{children:[i.map(s=>e.jsx(c,{value:s.id,children:s.nameAr},s.id)),i.length===0&&e.jsx(c,{value:"demo",children:"مستودع تجريبي"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"إلى فرع / مستودع"}),e.jsxs(N,{onValueChange:L,children:[e.jsx(y,{children:e.jsx(b,{placeholder:"اختر الوجهة"})}),e.jsxs(v,{children:[n.map(s=>e.jsx(c,{value:s.id,children:s.nameAr},s.id)),n.length===0&&e.jsx(c,{value:"demo-branch",children:"فرع تجريبي"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"الأصناف المراد تحويلها"}),t.map((s,d)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{placeholder:"اسم الصنف أو المعرف",className:"flex-1"}),e.jsx(f,{type:"number",placeholder:"الكمية",className:"w-24"}),e.jsx(l,{variant:"outline",size:"icon",onClick:()=>{const h=[...t];h.splice(d,1),x(h)},children:"×"})]},d)),e.jsx(l,{variant:"outline",size:"sm",className:"w-full",onClick:()=>x([...t,{ingredientId:"",quantity:0,unit:"g"}]),children:"+ إضافة صنف آخر"})]}),e.jsx(l,{className:"w-full",size:"lg",onClick:()=>T.mutate({fromWarehouseId:I,toWarehouseId:q,items:t}),children:"تأكيد وبدء التحويل"})]})]}),e.jsxs(a,{children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2 text-xl",children:[e.jsx(D,{className:"w-5 h-5 text-primary"})," سجل التحويلات والمخزون"]}),e.jsx(g,{children:"متابعة حالة الشحنات وتوافر المخزون عبر الشبكة"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4 border rounded-lg p-8 bg-muted/20 flex flex-col items-center justify-center text-center",children:[e.jsx(E,{className:"w-12 h-12 text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"font-medium",children:"لا توجد عمليات تحويل حالية"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"سيظهر تاريخ عمليات النقل هنا فور بدئها"})]})})]})]})]})}export{se as default};
