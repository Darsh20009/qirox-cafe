import{j as e}from"./vendor-ui-DJm-zmnP.js";import{r as c}from"./vendor-react-Bzsngnqy.js";import{c as p,e as u,C as h,x as f,O as j,y as g,W as v,f as y,L as N,p as b,I as w,B as d,g as C}from"./index-61RjstaY.js";import"./vendor-query-CX8ZYlKb.js";import"./vendor-utils-BKCsaWdX.js";function I(){const[,n]=p(),[s,m]=c.useState(""),[o,l]=c.useState(!1),{toast:r}=u(),x=async a=>{if(a.preventDefault(),!s.trim()){r({title:"خطأ",description:"يرجى إدخال رقم الجوال",variant:"destructive"});return}l(!0);try{const t=await fetch("/api/delivery/drivers/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:s.trim()}),credentials:"include"}),i=await t.json();if(!t.ok)throw new Error(i.error||"فشل تسجيل الدخول");localStorage.setItem("currentDriver",JSON.stringify(i.driver)),r({title:"مرحباً",description:`أهلاً ${i.driver.fullName}`}),n("/driver/portal")}catch(t){r({title:"خطأ",description:t.message||"فشل تسجيل الدخول",variant:"destructive"})}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-primary/5 flex items-center justify-center p-4",dir:"rtl",children:e.jsxs(h,{className:"w-full max-w-md",children:[e.jsxs(f,{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(j,{className:"w-10 h-10 text-primary"})}),e.jsx(g,{className:"text-2xl",children:"بوابة المندوب"}),e.jsx(v,{children:"سجل دخولك لإدارة طلبات التوصيل"})]}),e.jsxs(y,{children:[e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"phone",children:"رقم الجوال"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(w,{id:"phone",type:"tel",placeholder:"05xxxxxxxx",value:s,onChange:a=>m(a.target.value),className:"pr-10 text-left",dir:"ltr","data-testid":"input-phone"})]})]}),e.jsx(d,{type:"submit",className:"w-full",disabled:o,"data-testid":"button-login",children:o?"جاري الدخول...":"تسجيل الدخول"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(d,{variant:"ghost",onClick:()=>n("/"),className:"text-muted-foreground",children:[e.jsx(C,{className:"w-4 h-4 ml-2"}),"العودة للرئيسية"]})})]})]})})}export{I as default};
