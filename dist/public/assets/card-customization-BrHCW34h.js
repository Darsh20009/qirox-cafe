import{j as e}from"./vendor-ui-DJm-zmnP.js";import{r as m}from"./vendor-react-Bzsngnqy.js";import{aa as F,ab as k,ac as u,ai as f,k as j,j as A,C as g,x as y,y as C,S as h,f as p,L as v,B as b,c as B,t as E,w,g as N}from"./index-CLvpp2UE.js";import{P as S}from"./palette-Dkkc4DXs.js";import{E as T}from"./eye-cZNGFzyE.js";import"./vendor-query-CX8ZYlKb.js";import"./vendor-utils-BKCsaWdX.js";const c=[{id:"classic-gold",name:"الذهبي الكلاسيكي",style:"gradient",colors:{primary:"#FFD700",secondary:"#FFA500",accent:"#8B4513"},preview:{bg:"linear-gradient(135deg, #FFD700 0%, #FFA500 25%, #FF8C00 50%, #D4A574 75%, #8B4513 100%)",text:"#ffffff"}},{id:"velvet-brown",name:"البني المخملي",style:"gradient",colors:{primary:"#8B6F47",secondary:"#6F5C3E",accent:"#4A3728"},preview:{bg:"linear-gradient(135deg, #A0826D 0%, #8B6F47 50%, #6F5C3E 100%)",text:"#ffffff"}},{id:"espresso-dark",name:"الإسبريسو الداكن",style:"gradient",colors:{primary:"#2F1B0C",secondary:"#1a1410",accent:"#0d0a08"},preview:{bg:"linear-gradient(135deg, #4A2C1A 0%, #2F1B0C 50%, #1a1410 100%)",text:"#f5f5dc"}},{id:"caramel-sunrise",name:"الكراميل والشروق",style:"gradient",colors:{primary:"#E6B87D",secondary:"#D4A574",accent:"#C19A6B"},preview:{bg:"linear-gradient(135deg, #FFE4B5 0%, #E6B87D 50%, #D4A574 100%)",text:"#5a4a3a"}},{id:"premium-copper",name:"النحاس البريق",style:"gradient",colors:{primary:"#B87333",secondary:"#A0522D",accent:"#8B4513"},preview:{bg:"linear-gradient(135deg, #D4845C 0%, #B87333 50%, #A0522D 100%)",text:"#ffffff"}},{id:"midnight-mocha",name:"موكا منتصف الليل",style:"gradient",colors:{primary:"#3C2415",secondary:"#5A3A2A",accent:"#2F1F14"},preview:{bg:"linear-gradient(135deg, #5A3A2A 0%, #3C2415 50%, #2F1F14 100%)",text:"#e8dcc8"}},{id:"rose-latte",name:"لاتيه الوردة",style:"gradient",colors:{primary:"#D4A5A5",secondary:"#C99B9B",accent:"#9B7E7E"},preview:{bg:"linear-gradient(135deg, #F4D8D8 0%, #D4A5A5 50%, #C99B9B 100%)",text:"#4a3838"}},{id:"forest-matcha",name:"ماتشا الغابة",style:"gradient",colors:{primary:"#6B8E23",secondary:"#556B2F",accent:"#3D4D1F"},preview:{bg:"linear-gradient(135deg, #8FBC8F 0%, #6B8E23 50%, #556B2F 100%)",text:"#ffffff"}}];function z({selectedDesign:t="classic-gold",onDesignSelect:d,customerName:n,customerPhone:l}){const[s,x]=m.useState(c.find(r=>r.id===t)||c[0]),o=r=>{x(r),d(r)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(F,{defaultValue:"designs",className:"w-full",children:[e.jsxs(k,{className:"grid w-full grid-cols-2",children:[e.jsxs(u,{value:"designs",className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"التصاميم"]}),e.jsxs(u,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"معاينة"]})]}),e.jsxs(f,{value:"designs",className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"اختر تصميم البطاقة الذي يعجبك من الخيارات أدناه"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4",children:c.map(r=>e.jsxs("button",{onClick:()=>o(r),className:`relative group rounded-lg overflow-hidden transition-all duration-300 border-2 ${s?.id===r.id?"border-primary shadow-lg scale-105":"border-transparent hover:scale-110"}`,children:[e.jsxs("div",{className:"w-full h-24 flex items-center justify-center relative",style:{background:r.preview.bg},children:[e.jsx("div",{className:"absolute top-1.5 right-1.5 w-4 h-4 rounded border border-white/30",style:{background:r.preview.bg},children:e.jsxs("div",{className:"grid grid-cols-2 gap-px p-0.5 h-full",children:[e.jsx("div",{className:"bg-white/10 rounded-[1px]"}),e.jsx("div",{className:"bg-white/10 rounded-[1px]"}),e.jsx("div",{className:"bg-white/10 rounded-[1px]"}),e.jsx("div",{className:"bg-white/10 rounded-[1px]"})]})}),e.jsx("div",{className:"text-xl opacity-80",style:{color:r.preview.text},children:"☕"}),s?.id===r.id&&e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-primary rounded-full p-2 text-white",children:e.jsx(j,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"p-2 bg-card",children:e.jsx("p",{className:"text-xs font-semibold text-center truncate text-foreground",children:r.name})}),s?.id===r.id&&e.jsx(A,{className:"absolute -top-2 -left-2 bg-primary text-primary-foreground",children:"مختار"})]},r.id))})]}),e.jsx(f,{value:"preview",className:"space-y-4",children:s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"معاينة البطاقة"}),e.jsxs("div",{className:"h-56 rounded-2xl shadow-2xl overflow-hidden flex flex-col justify-between p-6 border-4 border-white relative group hover:scale-105 transition-transform duration-300",style:{background:s.preview.bg,boxShadow:"0 20px 60px rgba(0,0,0,0.3), inset -2px -2px 8px rgba(0,0,0,0.1), inset 2px 2px 8px rgba(255,255,255,0.2)"},children:[e.jsx("div",{className:"absolute top-4 right-4 w-10 h-10 rounded-lg border-2 border-white/40",style:{background:s.preview.bg,boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:e.jsxs("div",{className:"grid grid-cols-2 gap-1 p-1.5 h-full",children:[e.jsx("div",{className:"bg-white/10 rounded"}),e.jsx("div",{className:"bg-white/10 rounded"}),e.jsx("div",{className:"bg-white/10 rounded"}),e.jsx("div",{className:"bg-white/10 rounded"})]})}),e.jsx("div",{className:"absolute top-4 left-4 text-lg font-bold drop-shadow-lg",style:{color:s.preview.text},children:"☕ CLUNY CAFE"}),e.jsxs("div",{className:"relative h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-75 tracking-widest mb-1",style:{color:s.preview.text},children:"رقم البطاقة"}),e.jsx("p",{className:"text-xl font-mono tracking-wider font-bold drop-shadow-lg",style:{color:s.preview.text},children:"•••• •••• •••• 2024"})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-75 mb-0.5",style:{color:s.preview.text},children:n.substring(0,15)}),e.jsx("p",{className:"text-sm font-bold drop-shadow-lg",style:{color:s.preview.text},children:l})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs opacity-75 mb-0.5",style:{color:s.preview.text},children:"صلاحية"}),e.jsx("p",{className:"text-sm font-bold drop-shadow-lg",style:{color:s.preview.text},children:"حياة"})]})]})]}),e.jsx("div",{className:"absolute top-2 left-2 w-3 h-3 border-t-2 border-l-2 opacity-50 rounded-tl-lg",style:{borderColor:s.preview.text}}),e.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 border-t-2 border-r-2 opacity-50 rounded-tr-lg",style:{borderColor:s.preview.text}}),e.jsx("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-b-2 border-l-2 opacity-50 rounded-bl-lg",style:{borderColor:s.preview.text}}),e.jsx("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-b-2 border-r-2 opacity-50 rounded-br-lg",style:{borderColor:s.preview.text}})]})]}),e.jsxs(g,{className:"border border-border",children:[e.jsx(y,{children:e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),s.name]})}),e.jsxs(p,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-xs font-semibold text-muted-foreground",children:"نمط التصميم"}),e.jsx("p",{className:"text-sm mt-1 capitalize",children:s.style==="gradient"?"متدرج":s.style==="solid"?"متجانس":"نمط"})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-xs font-semibold text-muted-foreground",children:"الألوان الرئيسية"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-border",style:{backgroundColor:s.colors.primary},title:"اللون الأساسي"}),e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-border",style:{backgroundColor:s.colors.secondary},title:"اللون الثانوي"}),e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-border",style:{backgroundColor:s.colors.accent},title:"اللون الإضافي"})]})]})]})]}),e.jsxs(b,{onClick:()=>o(s),className:"w-full",size:"lg",children:[e.jsx(j,{className:"w-4 h-4 ml-2"}),"تأكيد هذا التصميم"]})]})})]})})}function O(){const[,t]=B(),{customer:d,isAuthenticated:n}=E(),[l,s]=m.useState(null),[x,o]=m.useState(!1);m.useEffect(()=>{if(!n){t("/auth");return}const a=w.getCardDesign();if(a){const i=c.find(D=>D.id===a.designId);i&&s(i)}else s(c[0])},[n,t]);const r=async a=>{o(!0);try{w.setCardDesign({designId:a.id,name:a.name,colors:a.colors,preview:a.preview}),s(a);const i=new CustomEvent("toast",{detail:{title:"تم الحفظ بنجاح!",description:`تم حفظ تصميم ${a.name}`,duration:3e3}});window.dispatchEvent(i),setTimeout(()=>{t("/loyalty")},1500)}catch(i){console.error("Error saving design:",i)}finally{o(!1)}};return d?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background/20",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-sm border-b border-border",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"تخصيص بطاقتك"}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>t("/my-card"),className:"rounded-full",children:e.jsx(N,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"relative group animate-in fade-in-0 slide-in-from-top-10 duration-500",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-amber-400/30 via-primary/50/30 to-amber-400/30 rounded-2xl blur-lg opacity-50 group-hover:opacity-75 transition-opacity duration-500"}),e.jsx("div",{className:"relative bg-gradient-to-br from-amber-50/90 via-primary/5/80 to-background/90 backdrop-blur-sm rounded-2xl p-8 border-2 border-primary/50 shadow-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-amber-500 to-orange-600 rounded-full text-white shadow-lg",children:e.jsx(h,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-accent mb-2",children:"اختر تصميم بطاقتك المفضل"}),e.jsx("p",{className:"text-accent",children:"اختر من بين 8 تصاميم فريدة تعكس شخصيتك وتفضلاتك. يمكنك تغيير التصميم في أي وقت."})]})]})})]}),e.jsxs(g,{className:"border-border shadow-lg",children:[e.jsx(y,{className:"bg-gradient-to-r from-primary/5 to-secondary/5 border-b border-border",children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-accent"}),"اختر التصميم"]})}),e.jsx(p,{className:"pt-8",children:e.jsx(z,{selectedDesign:l?.id,onDesignSelect:s,customerName:d.name,customerPhone:d.phone})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(b,{variant:"outline",onClick:()=>t("/my-card"),className:"text-base",children:[e.jsx(N,{className:"w-4 h-4 ml-2"}),"الرجوع"]}),e.jsx(b,{onClick:()=>l&&r(l),disabled:x||!l,className:"text-base",children:x?"جاري الحفظ...":"حفظ التصميم"})]}),e.jsx(g,{className:"border-blue-200 bg-blue-50/30",children:e.jsxs(p,{className:"pt-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"نصائح:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("li",{children:"✓ اختر التصميم الذي يناسبك من القائمة"}),e.jsx("li",{children:"✓ انظر المعاينة لترى كيف ستبدو بطاقتك"}),e.jsx("li",{children:"✓ يمكنك تغيير التصميم في أي وقت من هنا"}),e.jsx("li",{children:"✓ تصاميمك محفوظة على جهازك بشكل آمن"})]})]})})]})]}):null}export{O as default};
