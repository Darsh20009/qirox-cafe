import{j as e}from"./vendor-ui-DJm-zmnP.js";import{r as v}from"./vendor-react-Bzsngnqy.js";import{l as hs,L as l,B as p,I as c,o as ee,e as Le,j as q,D as oe,Y as Ae,P as ve,E as me,F as he,H as xe,K as As,C as f,f as N,ap as Qe,v as H,N as I,O as Ss,aa as xs,ab as us,ac as B,ai as R,x as S,y as k,V as _,p as ks,c as Es,a5 as Fs,i as Ts,g as Ps,R as Is,$ as Ve,_ as Ds,a6 as Xe}from"./index-CLvpp2UE.js";import{a as $,b as U}from"./vendor-query-CX8ZYlKb.js";import{S as le,a as de,b as je,c as ce,d as P}from"./select-BzAjeBJu.js";import{M as Ms,T as Os,L as ps,a as Ls}from"./leaflet-Cu_ciSmi.js";import{N as Ks}from"./navigation-C4sukurV.js";import{u as Bs}from"./hooks-Be5loCHH.js";import{T as He}from"./ticket-CIpS9gUs.js";import{P as Ye}from"./percent-CSssf6tt.js";import{S as Ze}from"./switch-C9eC4DLi.js";import{L as Je}from"./link-2-C_6phh6p.js";import{U as fe}from"./users-Ce5vrIiy.js";import{C as Rs}from"./circle-x-B1Jm2Zh7.js";import{C as Us}from"./circle-check-big-DlXUvwLH.js";import{S as zs}from"./settings-CIxkmZWE.js";import{C as gs}from"./car-0OJdyCDc.js";import{S as We}from"./square-pen-C2M2occ2.js";import{B as Ie}from"./bike-za06j2Dq.js";import{utils as G,writeFile as _s}from"./xlsx-62rwurJE.js";import{P as qs}from"./package-B_dGuXgn.js";import{W as $s}from"./warehouse-ByZ2zAAq.js";import{U as Ge}from"./user-check-DrDLOVgz.js";import{C as Qs}from"./calendar-MKHPq1ii.js";import{D as es}from"./dollar-sign-CFWcU9O3.js";import{T as ss}from"./trending-up-BzxeYQ4e.js";import{T as Vs}from"./trending-down-By0t33Hr.js";import{A as as}from"./activity-CtLuw4vZ.js";import{R as ts}from"./receipt-7jFYni-X.js";import{E as rs}from"./external-link-0kHYrxD8.js";import{R as De,C as ns,X as is,Y as ls,T as Me,a as Xs,L as Hs,B as ds}from"./BarChart-C-BXurcz.js";import{A as Ys,a as Zs}from"./AreaChart-EwIn2y1e.js";import{P as Js,a as Ws}from"./PieChart-CcImm4lT.js";import{P as Gs}from"./pen-DQVHph_P.js";import"./vendor-utils-BKCsaWdX.js";import"./chevron-down-CqdH-ack.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=hs("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=hs("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);delete ps.Icon.Default.prototype._getIconUrl;ps.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function aa({position:o,setPosition:g}){return Bs({click(O){g({lat:O.latlng.lat,lng:O.latlng.lng})}}),o?e.jsx(Ls,{position:[o.lat,o.lng]}):null}function cs({initialLat:o,initialLng:g,onLocationSelect:O}){const y={lat:24.7136,lng:46.6753},[x,F]=v.useState({lat:o||y.lat,lng:g||y.lng});v.useEffect(()=>{o&&g&&F({lat:o,lng:g})},[o,g]),v.useEffect(()=>{O(x.lat,x.lng)},[x,O]);const T=(u,w)=>{F({lat:u,lng:w})},Y=u=>{F(u)},D=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(u=>{F({lat:u.coords.latitude,lng:u.coords.longitude})},u=>{console.error("Error getting location:",u),alert("Ù„Ù… Ù†Ø³ØªØ·Ø¹ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ. ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹.")}):alert("Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø®Ø¯Ù…Ø§Øª ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-gray-300",children:"Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙØ±Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©"}),e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:D,className:"border-amber-500/50 text-amber-500 hover:bg-amber-500/10",children:[e.jsx(Ks,{className:"w-4 h-4 ml-1"}),"Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ"]})]}),e.jsx("div",{className:"h-64 rounded-lg overflow-hidden border border-amber-500/30 bg-gray-900",children:e.jsxs(Ms,{center:[x.lat,x.lng],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(Os,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19,crossOrigin:!0}),e.jsx(aa,{position:x,setPosition:Y})]},`${x.lat}-${x.lng}`)}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"lat",className:"text-gray-300 text-sm",children:"Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ (Latitude)"}),e.jsx(c,{id:"lat",type:"number",step:"0.0001",value:x.lat,onChange:u=>T(parseFloat(u.target.value)||0,x.lng),className:"bg-[#1a1410] border-amber-500/30 text-white",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"lng",className:"text-gray-300 text-sm",children:"Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ (Longitude)"}),e.jsx(c,{id:"lng",type:"number",step:"0.0001",value:x.lng,onChange:u=>T(x.lat,parseFloat(u.target.value)||0),className:"bg-[#1a1410] border-amber-500/30 text-white",dir:"ltr"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-500/10 rounded-lg border border-amber-500/20",children:[e.jsx(ee,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-amber-200 font-medium",children:"ÙƒÙŠÙÙŠØ© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹:"}),e.jsxs("ul",{className:"text-gray-300 text-xs space-y-1 mt-1",children:[e.jsx("li",{children:"â€¢ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹"}),e.jsx("li",{children:"â€¢ Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª ÙŠØ¯ÙˆÙŠÙ‹Ø§"}),e.jsx("li",{children:"â€¢ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ"})]})]})]})]})}function ta({employeeId:o}){const{toast:g}=Le(),[O,y]=v.useState(!1),[x,F]=v.useState({code:"",discountPercentage:10,reason:""}),{data:T=[],isLoading:Y}=$({queryKey:["/api/discount-codes/employee",o],enabled:!!o}),D=U({mutationFn:async n=>await H("POST","/api/discount-codes",n),onSuccess:()=>{g({title:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†",description:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ… Ø¨Ù†Ø¬Ø§Ø­",className:"bg-green-600 text-white"}),y(!1),F({code:"",discountPercentage:10,reason:""}),I.invalidateQueries({queryKey:["/api/discount-codes/employee",o]})},onError:n=>{g({title:"Ø®Ø·Ø£",description:n.message||"ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…",variant:"destructive"})}}),u=U({mutationFn:async({id:n,isActive:j})=>await H("PATCH",`/api/discount-codes/${n}`,{isActive:j,employeeId:o}),onSuccess:()=>{g({title:"ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†"}),I.invalidateQueries({queryKey:["/api/discount-codes/employee",o]})},onError:n=>{g({title:"Ø®Ø·Ø£",description:n.message||"ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†",variant:"destructive"})}}),w=()=>{if(!x.code.trim()){g({title:"Ø®Ø·Ø£",description:"ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…",variant:"destructive"});return}if(x.discountPercentage<=0||x.discountPercentage>100){g({title:"Ø®Ø·Ø£",description:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 1 Ùˆ 100",variant:"destructive"});return}if(!x.reason.trim()){g({title:"Ø®Ø·Ø£",description:"ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ…",variant:"destructive"});return}D.mutate({code:x.code.toUpperCase(),discountPercentage:x.discountPercentage,reason:x.reason,employeeId:o})},i=()=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let j="";for(let b=0;b<8;b++)j+=n.charAt(Math.floor(Math.random()*n.length));F({...x,code:j})};return Y?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ"}),e.jsx(q,{variant:"secondary",children:T.length})]}),e.jsxs(oe,{open:O,onOpenChange:y,children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(p,{"data-testid":"button-add-coupon",children:[e.jsx(ve,{className:"w-4 h-4 ml-2"}),"Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¨ÙˆÙ†"]})}),e.jsxs(me,{className:"sm:max-w-md",children:[e.jsx(he,{children:e.jsx(xe,{children:"Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø®ØµÙ… Ø¬Ø¯ÙŠØ¯"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"code",children:"ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{id:"code",placeholder:"Ù…Ø«Ø§Ù„: WELCOME20",value:x.code,onChange:n=>F({...x,code:n.target.value.toUpperCase()}),className:"flex-1","data-testid":"input-coupon-code"}),e.jsx(p,{variant:"outline",onClick:i,type:"button",children:"ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"percentage",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… (%)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{id:"percentage",type:"number",min:"1",max:"100",value:x.discountPercentage,onChange:n=>F({...x,discountPercentage:parseInt(n.target.value)||0}),"data-testid":"input-coupon-percentage"}),e.jsx(Ye,{className:"w-5 h-5 text-muted-foreground"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"reason",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø®ØµÙ…"}),e.jsx(c,{id:"reason",placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ Ø§Ù„Ø§ÙØªØªØ§Ø­ØŒ Ø¹Ù…ÙŠÙ„ Ù…Ù…ÙŠØ²",value:x.reason,onChange:n=>F({...x,reason:n.target.value}),"data-testid":"input-coupon-reason"})]})]}),e.jsxs(As,{children:[e.jsx(p,{variant:"outline",onClick:()=>y(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(p,{onClick:w,disabled:D.isPending,"data-testid":"button-confirm-create-coupon",children:D.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...":"Ø¥Ù†Ø´Ø§Ø¡"})]})]})]})]}),T.length===0?e.jsx(f,{className:"bg-muted/30",children:e.jsxs(N,{className:"p-8 text-center",children:[e.jsx(Qe,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯ Ø®ØµÙ… Ø¨Ø¹Ø¯"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¨ÙˆÙ†" Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø®ØµÙ… Ø¬Ø¯ÙŠØ¯'})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(n=>e.jsx(f,{className:`border ${n.isActive?"border-green-500/30 bg-green-50/50 dark:bg-green-950/10":"border-red-500/30 bg-red-50/50 dark:bg-red-950/10"}`,children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-mono font-bold text-lg",children:n.code})]}),e.jsx(q,{className:n.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:n.isActive?"Ù†Ø´Ø·":"Ù…Ø¹Ø·Ù„"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Ø®ØµÙ… ",n.discountPercentage,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:n.reason})]}),n.usageCount!==void 0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ØªÙ… Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: ",n.usageCount," Ù…Ø±Ø©"]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t flex gap-2",children:e.jsx(p,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>u.mutate({id:n.id,isActive:n.isActive?0:1}),disabled:u.isPending,"data-testid":`button-toggle-coupon-${n.code}`,children:n.isActive?e.jsxs(e.Fragment,{children:[e.jsx(sa,{className:"w-4 h-4 ml-2"}),"ØªØ¹Ø·ÙŠÙ„"]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"w-4 h-4 ml-2"}),"ØªÙØ¹ÙŠÙ„"]})})})]})},n.id))})]})}const Oe=[{id:"noon_food",nameAr:"Ù†ÙˆÙ† ÙÙˆØ¯",nameEn:"Noon Food",logo:"ğŸŸ¡"},{id:"hunger_station",nameAr:"Ù‡Ù†Ù‚Ø±Ø³ØªÙŠØ´Ù†",nameEn:"Hunger Station",logo:"ğŸŸ "},{id:"keeta",nameAr:"ÙƒÙŠØªØ§",nameEn:"Keeta",logo:"ğŸŸ¢"},{id:"jahez",nameAr:"Ø¬Ø§Ù‡Ø²",nameEn:"Jahez",logo:"ğŸ”´"},{id:"toyou",nameAr:"ØªÙˆ ÙŠÙˆ",nameEn:"ToYou",logo:"ğŸ”µ"},{id:"mrsool",nameAr:"Ù…Ø±Ø³ÙˆÙ„",nameEn:"Mrsool",logo:"ğŸŸ£"},{id:"careem",nameAr:"ÙƒØ±ÙŠÙ…",nameEn:"Careem",logo:"ğŸŸ¤"},{id:"custom",nameAr:"Ù…Ø®ØµØµ",nameEn:"Custom",logo:"âš™ï¸"}],os=[{id:"motorcycle",nameAr:"Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©",icon:Ie},{id:"car",nameAr:"Ø³ÙŠØ§Ø±Ø©",icon:gs},{id:"bicycle",nameAr:"Ø¯Ø±Ø§Ø¬Ø© Ù‡ÙˆØ§Ø¦ÙŠØ©",icon:Ie},{id:"scooter",nameAr:"Ø³ÙƒÙˆØªØ±",icon:Ie}];function ra(){const{toast:o}=Le(),[g,O]=v.useState("integrations"),[y,x]=v.useState(!1),[F,T]=v.useState(!1),[Y,D]=v.useState(!1),[u,w]=v.useState({providerName:"",providerNameAr:"",apiKey:"",apiSecret:"",merchantId:"",webhookUrl:"",baseUrl:"",isActive:0,isTestMode:1,commissionPercent:0,fixedFee:0}),[i,n]=v.useState({fullName:"",phone:"",email:"",vehicleType:"motorcycle",vehiclePlate:"",vehicleModel:"",shiftStart:"08:00",shiftEnd:"22:00",maxConcurrentOrders:3}),[j,b]=v.useState({nameAr:"",nameEn:"",branchId:"",zoneType:"radius",centerLat:24.7136,centerLng:46.6753,radiusKm:5,baseFee:10,feePerKm:2,minOrderAmount:0,freeDeliveryThreshold:100,estimatedMinMinutes:20,estimatedMaxMinutes:45,isActive:1}),{data:Q,isLoading:V}=$({queryKey:["/api/delivery/integrations"]}),{data:se,isLoading:X}=$({queryKey:["/api/delivery/drivers"]}),{data:ae,isLoading:ue}=$({queryKey:["/api/delivery/zones"]}),{data:Z}=$({queryKey:["/api/branches"]}),J=U({mutationFn:async a=>H("POST","/api/delivery/integrations",a),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/delivery/integrations"]}),x(!1),w({providerName:"",providerNameAr:"",apiKey:"",apiSecret:"",merchantId:"",webhookUrl:"",baseUrl:"",isActive:0,isTestMode:1,commissionPercent:0,fixedFee:0}),o({title:"ØªÙ… Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ© Ø§Ù„ØªÙˆØµÙŠÙ„"})},onError:()=>{o({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ© Ø§Ù„ØªÙˆØµÙŠÙ„",variant:"destructive"})}}),W=U({mutationFn:async a=>H("POST","/api/delivery/drivers",a),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/delivery/drivers"]}),T(!1),n({fullName:"",phone:"",email:"",vehicleType:"motorcycle",vehiclePlate:"",vehicleModel:"",shiftStart:"08:00",shiftEnd:"22:00",maxConcurrentOrders:3}),o({title:"ØªÙ… Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})},onError:()=>{o({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨",variant:"destructive"})}}),te=U({mutationFn:async a=>H("POST","/api/delivery/zones",a),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/delivery/zones"]}),D(!1),o({title:"ØªÙ… Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„"})},onError:()=>{o({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„",variant:"destructive"})}}),M=U({mutationFn:async({id:a,isActive:r})=>H("PATCH",`/api/delivery/integrations/${a}`,{isActive:r}),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/delivery/integrations"]}),o({title:"ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«",description:"ØªÙ… ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ø¨Ø·"})}}),re=U({mutationFn:async({id:a,status:r})=>H("PATCH",`/api/delivery/drivers/${a}/status`,{status:r}),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/delivery/drivers"]}),o({title:"ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«",description:"ØªÙ… ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})}}),C=Q?.integrations||[],z=se?.drivers||[],ne=ae?.zones||[],Se=Z||[];return e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",dir:"rtl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Ss,{className:"w-8 h-8 text-primary"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Ø¥Ø¯Ø§Ø±Ø© Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨ ÙˆÙ…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªØºØ·ÙŠØ©"})]})}),e.jsxs(xs,{value:g,onValueChange:O,className:"w-full",children:[e.jsxs(us,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(B,{value:"integrations",className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("span",{className:"sm:hidden",children:"Ø§Ù„Ø´Ø±ÙƒØ§Øª"})]}),e.jsxs(B,{value:"drivers",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨"}),e.jsx("span",{className:"sm:hidden",children:"Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠØ¨"})]}),e.jsxs(B,{value:"zones",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("span",{className:"sm:hidden",children:"Ø§Ù„Ù…Ù†Ø§Ø·Ù‚"})]})]}),e.jsxs(R,{value:"integrations",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Ø±Ø¨Ø· Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©"}),e.jsxs(oe,{open:y,onOpenChange:x,children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(p,{className:"gap-2","data-testid":"button-add-integration",children:[e.jsx(ve,{className:"w-4 h-4"}),"Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ©"]})}),e.jsxs(me,{className:"max-w-lg max-h-[90vh] overflow-y-auto",dir:"rtl",children:[e.jsx(he,{children:e.jsx(xe,{children:"Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙƒØ© ØªÙˆØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯Ø©"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø´Ø±ÙƒØ© Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsxs(le,{value:u.providerName,onValueChange:a=>{const r=Oe.find(L=>L.id===a);w(L=>({...L,providerName:a,providerNameAr:r?.nameAr||""}))},children:[e.jsx(de,{"data-testid":"select-provider",children:e.jsx(je,{placeholder:"Ø§Ø®ØªØ± Ø´Ø±ÙƒØ© Ø§Ù„ØªÙˆØµÙŠÙ„"})}),e.jsx(ce,{children:Oe.map(a=>e.jsx(P,{value:a.id,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:a.logo}),e.jsx("span",{children:a.nameAr})]})},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"API Key"}),e.jsx(c,{type:"password",value:u.apiKey,onChange:a=>w(r=>({...r,apiKey:a.target.value})),placeholder:"Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ API","data-testid":"input-api-key"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"API Secret"}),e.jsx(c,{type:"password",value:u.apiSecret,onChange:a=>w(r=>({...r,apiSecret:a.target.value})),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø±","data-testid":"input-api-secret"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ù…Ø¹Ø±Ù Ø§Ù„ØªØ§Ø¬Ø± (Merchant ID)"}),e.jsx(c,{value:u.merchantId,onChange:a=>w(r=>({...r,merchantId:a.target.value})),placeholder:"Ù…Ø¹Ø±Ù Ø§Ù„ØªØ§Ø¬Ø± Ù…Ù† Ø§Ù„Ø´Ø±ÙƒØ©","data-testid":"input-merchant-id"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Webhook URL"}),e.jsx(c,{value:u.webhookUrl,onChange:a=>w(r=>({...r,webhookUrl:a.target.value})),placeholder:"https://your-domain.com/api/webhooks/delivery",dir:"ltr","data-testid":"input-webhook-url"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© %"}),e.jsx(c,{type:"number",value:u.commissionPercent,onChange:a=>w(r=>({...r,commissionPercent:parseFloat(a.target.value)||0})),"data-testid":"input-commission"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø±Ø³ÙˆÙ… Ø«Ø§Ø¨ØªØ© (Ø±.Ø³)"}),e.jsx(c,{type:"number",value:u.fixedFee,onChange:a=>w(r=>({...r,fixedFee:parseFloat(a.target.value)||0})),"data-testid":"input-fixed-fee"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{checked:u.isTestMode===1,onCheckedChange:a=>w(r=>({...r,isTestMode:a?1:0})),"data-testid":"switch-test-mode"}),e.jsx(l,{children:"ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{checked:u.isActive===1,onCheckedChange:a=>w(r=>({...r,isActive:a?1:0})),"data-testid":"switch-active"}),e.jsx(l,{children:"Ù…ÙØ¹Ù‘Ù„"})]})]}),e.jsx(p,{className:"w-full",onClick:()=>J.mutate(u),disabled:!u.providerName||J.isPending,"data-testid":"button-save-integration",children:J.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"})]})]})]})]}),V?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):C.length===0?e.jsx(f,{className:"border-dashed",children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx(Je,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ù„Ù… ÙŠØªÙ… Ø±Ø¨Ø· Ø£ÙŠ Ø´Ø±ÙƒØ© ØªÙˆØµÙŠÙ„"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ø£Ø¶Ù Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© Ù„ØªÙ„Ù‚ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù†Ù‡Ø§"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:C.map(a=>{const r=Oe.find(L=>L.id===a.providerName);return e.jsxs(f,{className:`relative ${a.isActive?"border-green-500/50":"border-muted"}`,children:[e.jsx(S,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:r?.logo||"ğŸ“¦"}),e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:a.providerNameAr||r?.nameAr}),e.jsx(_,{children:r?.nameEn})]})]}),e.jsx(q,{variant:a.isActive?"default":"secondary",children:a.isActive?"Ù…ÙØ¹Ù‘Ù„":"Ù…Ø¹Ø·Ù‘Ù„"})]})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:"}),e.jsx(q,{variant:a.isTestMode?"outline":"default",children:a.isTestMode?"ØªØ¬Ø±ÙŠØ¨ÙŠ":"Ø¥Ù†ØªØ§Ø¬"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©:"}),e.jsxs("span",{children:[a.commissionPercent,"% + ",a.fixedFee," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>M.mutate({id:a.id,isActive:a.isActive?0:1}),"data-testid":`button-toggle-${a.id}`,children:[a.isActive?e.jsx(Rs,{className:"w-4 h-4 ml-1"}):e.jsx(Us,{className:"w-4 h-4 ml-1"}),a.isActive?"Ø¥ÙŠÙ‚Ø§Ù":"ØªÙØ¹ÙŠÙ„"]}),e.jsx(p,{variant:"outline",size:"sm","data-testid":`button-edit-${a.id}`,children:e.jsx(zs,{className:"w-4 h-4"})})]})]})]},a.id)})})]}),e.jsxs(R,{value:"drivers",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ"}),e.jsxs(oe,{open:F,onOpenChange:T,children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(p,{className:"gap-2","data-testid":"button-add-driver",children:[e.jsx(ve,{className:"w-4 h-4"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨"]})}),e.jsxs(me,{className:"max-w-lg",dir:"rtl",children:[e.jsx(he,{children:e.jsx(xe,{children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"}),e.jsx(c,{value:i.fullName,onChange:a=>n(r=>({...r,fullName:a.target.value})),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨","data-testid":"input-driver-name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"}),e.jsx(c,{value:i.phone,onChange:a=>n(r=>({...r,phone:a.target.value})),placeholder:"05xxxxxxxx",dir:"ltr","data-testid":"input-driver-phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx(c,{type:"email",value:i.email,onChange:a=>n(r=>({...r,email:a.target.value})),placeholder:"email@example.com",dir:"ltr","data-testid":"input-driver-email"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©"}),e.jsxs(le,{value:i.vehicleType,onValueChange:a=>n(r=>({...r,vehicleType:a})),children:[e.jsx(de,{"data-testid":"select-vehicle-type",children:e.jsx(je,{})}),e.jsx(ce,{children:os.map(a=>e.jsx(P,{value:a.id,children:a.nameAr},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©"}),e.jsx(c,{value:i.vehiclePlate,onChange:a=>n(r=>({...r,vehiclePlate:a.target.value})),placeholder:"ABC 1234",dir:"ltr","data-testid":"input-vehicle-plate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©"}),e.jsx(c,{value:i.vehicleModel,onChange:a=>n(r=>({...r,vehicleModel:a.target.value})),placeholder:"Honda PCX 2023","data-testid":"input-vehicle-model"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙˆØ±Ø¯ÙŠØ©"}),e.jsx(c,{type:"time",value:i.shiftStart,onChange:a=>n(r=>({...r,shiftStart:a.target.value})),"data-testid":"input-shift-start"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙˆØ±Ø¯ÙŠØ©"}),e.jsx(c,{type:"time",value:i.shiftEnd,onChange:a=>n(r=>({...r,shiftEnd:a.target.value})),"data-testid":"input-shift-end"})]})]}),e.jsx(p,{className:"w-full",onClick:()=>W.mutate(i),disabled:!i.fullName||!i.phone||W.isPending,"data-testid":"button-save-driver",children:W.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]})]})]})]}),X?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):z.length===0?e.jsx(f,{className:"border-dashed",children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx(fe,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†Ø§Ø¯ÙŠØ¨"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ø£Ø¶Ù Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:z.map(a=>{const r=os.find(ie=>ie.id===a.vehicleType),L=r?.icon||gs,pe={available:"bg-green-500",busy:"bg-yellow-500",offline:"bg-gray-400",on_break:"bg-blue-500"},ke={available:"Ù…ØªØ§Ø­",busy:"Ù…Ø´ØºÙˆÙ„",offline:"ØºÙŠØ± Ù…ØªØµÙ„",on_break:"ÙÙŠ Ø§Ø³ØªØ±Ø§Ø­Ø©"};return e.jsxs(f,{children:[e.jsx(S,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(L,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:a.fullName}),e.jsxs(_,{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3"}),a.phone]})]})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${pe[a.status]||"bg-gray-400"}`,title:ke[a.status]})]})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…Ø±ÙƒØ¨Ø©:"}),e.jsxs("span",{children:[r?.nameAr," - ",a.vehiclePlate||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:"}),e.jsxs("span",{children:["â­ ",a.rating?.toFixed(1)||"5.0"," (",a.ratingCount||0,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª:"}),e.jsxs("span",{children:[a.totalDeliveries||0," Ø·Ù„Ø¨"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(le,{value:a.status,onValueChange:ie=>re.mutate({id:a.id,status:ie}),children:[e.jsx(de,{className:"flex-1","data-testid":`select-driver-status-${a.id}`,children:e.jsx(je,{})}),e.jsxs(ce,{children:[e.jsx(P,{value:"available",children:"Ù…ØªØ§Ø­"}),e.jsx(P,{value:"busy",children:"Ù…Ø´ØºÙˆÙ„"}),e.jsx(P,{value:"on_break",children:"Ø§Ø³ØªØ±Ø§Ø­Ø©"}),e.jsx(P,{value:"offline",children:"ØºÙŠØ± Ù…ØªØµÙ„"})]})]}),e.jsx(p,{variant:"outline",size:"icon","data-testid":`button-edit-driver-${a.id}`,children:e.jsx(We,{className:"w-4 h-4"})})]})]})]},a.id)})})]}),e.jsxs(R,{value:"zones",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±"}),e.jsxs(oe,{open:Y,onOpenChange:D,children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(p,{className:"gap-2","data-testid":"button-add-zone",children:[e.jsx(ve,{className:"w-4 h-4"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø©"]})}),e.jsxs(me,{className:"max-w-lg max-h-[90vh] overflow-y-auto",dir:"rtl",children:[e.jsx(he,{children:e.jsx(xe,{children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚Ø© ØªÙˆØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯Ø©"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ø¹Ø±Ø¨ÙŠ)"}),e.jsx(c,{value:j.nameAr,onChange:a=>b(r=>({...r,nameAr:a.target.value})),placeholder:"Ù…Ø«Ø§Ù„: Ø´Ù…Ø§Ù„ Ø§Ù„Ø±ÙŠØ§Ø¶","data-testid":"input-zone-name-ar"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)"}),e.jsx(c,{value:j.nameEn,onChange:a=>b(r=>({...r,nameEn:a.target.value})),placeholder:"e.g. North Riyadh",dir:"ltr","data-testid":"input-zone-name-en"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„ÙØ±Ø¹"}),e.jsxs(le,{value:j.branchId,onValueChange:a=>b(r=>({...r,branchId:a})),children:[e.jsx(de,{"data-testid":"select-zone-branch",children:e.jsx(je,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹"})}),e.jsx(ce,{children:Se.map(a=>e.jsx(P,{value:a.id,children:a.nameAr},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ (Lat)"}),e.jsx(c,{type:"number",step:"0.0001",value:j.centerLat,onChange:a=>b(r=>({...r,centerLat:parseFloat(a.target.value)||0})),dir:"ltr","data-testid":"input-zone-lat"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø®Ø· Ø§Ù„Ø·ÙˆÙ„ (Lng)"}),e.jsx(c,{type:"number",step:"0.0001",value:j.centerLng,onChange:a=>b(r=>({...r,centerLng:parseFloat(a.target.value)||0})),dir:"ltr","data-testid":"input-zone-lng"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØºØ·ÙŠØ© (ÙƒÙ…)"}),e.jsx(c,{type:"number",value:j.radiusKm,onChange:a=>b(r=>({...r,radiusKm:parseFloat(a.target.value)||0})),"data-testid":"input-zone-radius"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø±.Ø³)"}),e.jsx(c,{type:"number",value:j.baseFee,onChange:a=>b(r=>({...r,baseFee:parseFloat(a.target.value)||0})),"data-testid":"input-zone-base-fee"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„Ø±Ø³ÙˆÙ… Ù„ÙƒÙ„ ÙƒÙ… (Ø±.Ø³)"}),e.jsx(c,{type:"number",value:j.feePerKm,onChange:a=>b(r=>({...r,feePerKm:parseFloat(a.target.value)||0})),"data-testid":"input-zone-fee-per-km"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨ (Ø±.Ø³)"}),e.jsx(c,{type:"number",value:j.minOrderAmount,onChange:a=>b(r=>({...r,minOrderAmount:parseFloat(a.target.value)||0})),"data-testid":"input-zone-min-order"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù…Ù† (Ø±.Ø³)"}),e.jsx(c,{type:"number",value:j.freeDeliveryThreshold,onChange:a=>b(r=>({...r,freeDeliveryThreshold:parseFloat(a.target.value)||0})),"data-testid":"input-zone-free-delivery"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø£Ø¯Ù†Ù‰ (Ø¯Ù‚ÙŠÙ‚Ø©)"}),e.jsx(c,{type:"number",value:j.estimatedMinMinutes,onChange:a=>b(r=>({...r,estimatedMinMinutes:parseInt(a.target.value)||0})),"data-testid":"input-zone-min-time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø£Ù‚ØµÙ‰ (Ø¯Ù‚ÙŠÙ‚Ø©)"}),e.jsx(c,{type:"number",value:j.estimatedMaxMinutes,onChange:a=>b(r=>({...r,estimatedMaxMinutes:parseInt(a.target.value)||0})),"data-testid":"input-zone-max-time"})]})]}),e.jsx(p,{className:"w-full",onClick:()=>te.mutate(j),disabled:!j.nameAr||!j.branchId||te.isPending,"data-testid":"button-save-zone",children:te.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"})]})]})]})]}),ue?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."}):ne.length===0?e.jsx(f,{className:"border-dashed",children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø§Ø·Ù‚ ØªÙˆØµÙŠÙ„"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Ø£Ø¶Ù Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙˆØµÙŠÙ„ Ù„ØªØ­Ø¯ÙŠØ¯ Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØºØ·ÙŠØ© ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ne.map(a=>e.jsxs(f,{className:a.isActive?"border-green-500/50":"border-muted",children:[e.jsx(S,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:a.nameAr}),e.jsx(_,{children:a.nameEn})]}),e.jsx(q,{variant:a.isActive?"default":"secondary",children:a.isActive?"Ù†Ø´Ø·":"Ù…Ø¹Ø·Ù‘Ù„"})]})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØºØ·ÙŠØ©:"}),e.jsxs("span",{children:[a.radiusKm," ÙƒÙ…"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø±Ø³ÙˆÙ…:"}),e.jsxs("span",{children:[a.baseFee," Ø±.Ø³ + ",a.feePerKm," Ø±.Ø³/ÙƒÙ…"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ:"}),e.jsx("span",{children:a.freeDeliveryThreshold?`${a.freeDeliveryThreshold}+ Ø±.Ø³`:"ØºÙŠØ± Ù…ØªØ§Ø­"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"ÙˆÙ‚Øª Ø§Ù„ØªÙˆØµÙŠÙ„:"}),e.jsxs("span",{children:[a.estimatedMinMinutes,"-",a.estimatedMaxMinutes," Ø¯Ù‚ÙŠÙ‚Ø©"]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1","data-testid":`button-edit-zone-${a.id}`,children:[e.jsx(We,{className:"w-4 h-4 ml-1"}),"ØªØ¹Ø¯ÙŠÙ„"]})})]})]},a.id))})]})]})]})}const ms=[{name:"Ø§Ù„Ø±ÙŠØ§Ø¶ | Riyadh",lat:"24.7136",lon:"46.6753"},{name:"Ø¬Ø¯Ø© | Jeddah",lat:"21.5433",lon:"39.1728"},{name:"Ø§Ù„Ø¯Ù…Ø§Ù… | Dammam",lat:"26.4124",lon:"50.1971"},{name:"Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø© | Mecca",lat:"21.4225",lon:"39.8262"},{name:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø© | Medina",lat:"24.4672",lon:"39.6024"},{name:"Ø§Ù„Ø®Ø¨Ø± | Khobar",lat:"26.1588",lon:"50.2046"},{name:"Ø§Ù„Ø¸Ù‡Ø±Ø§Ù† | Dhahran",lat:"26.1428",lon:"50.1436"},{name:"Ø¹Ø±Ø¹Ø± | Arar",lat:"30.9753",lon:"41.0272"},{name:"Ø·Ø±ÙŠÙ | Turaif",lat:"31.6778",lon:"39.6444"},{name:"Ø§Ù„Ù‚ØµÙŠÙ… | Qassim",lat:"26.1669",lon:"44.0056"},{name:"Ø­Ø§Ø¦Ù„ | Hail",lat:"27.5247",lon:"41.7202"},{name:"Ø§Ù„Ø¬ÙˆÙ | Al Jouf",lat:"29.7833",lon:"40.8333"},{name:"Ø§Ù„Ø¨Ø§Ø­Ø© | Al Bahah",lat:"19.9885",lon:"41.4359"},{name:"Ø¹Ø³ÙŠØ± | Asir",lat:"18.2147",lon:"42.5053"},{name:"Ø§Ù„Ø·Ø§Ø¦Ù | Taif",lat:"21.2704",lon:"40.4156"},{name:"ÙŠÙ†Ø¨Ø¹ | Yanbu",lat:"24.0887",lon:"38.0697"},{name:"Ø§Ù„Ù„ÙŠØ« | Lith",lat:"20.2381",lon:"40.1797"},{name:"Ø±ÙØ­Ø§Ø¡ | Rafha",lat:"29.6000",lon:"43.4833"},{name:"Ø³ÙƒØ§ÙƒØ§ | Sakaka",lat:"29.9709",lon:"40.2056"},{name:"Ø¨Ø±ÙŠØ¯Ø© | Buraydah",lat:"26.3263",lon:"43.9750"}];function qa(){const[,o]=Es(),[g,O]=v.useState(null),[y,x]=v.useState("all");v.useEffect(()=>{document.title="Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ± - CLUNY CAFE | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª";const s=document.querySelector('meta[name="description"]');s&&s.setAttribute("content","Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ± ÙÙŠ CLUNY CAFE - Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„ÙØ±ÙˆØ¹ ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†")},[]);const[F,T]=v.useState(!1),[Y,D]=v.useState(!1),[u,w]=v.useState(null),[i,n]=v.useState({nameAr:"",nameEn:"",address:"",phone:"",city:"",managerName:"",mapsUrl:"",latitude:24.7136,longitude:46.6753}),[j,b]=v.useState(""),[Q,V]=v.useState([]),[se,X]=v.useState(!1),[ae,ue]=v.useState(!1),[Z,J]=v.useState("existing"),[W,te]=v.useState(""),[M,re]=v.useState({fullName:"",username:"",phone:""}),{toast:C}=Le();v.useEffect(()=>{(async()=>{const t=localStorage.getItem("currentEmployee");if(t){const d=JSON.parse(t);if(d.role!=="manager"&&d.role!=="admin"){localStorage.removeItem("currentEmployee"),o("/employee/dashboard");return}try{if(!(await fetch("/api/verify-session",{credentials:"include"})).ok){localStorage.removeItem("currentEmployee"),o("/manager/login");return}O(d)}catch(m){console.error("Session verification error:",m),localStorage.removeItem("currentEmployee"),o("/manager/login")}}else o("/manager/login")})()},[o]);const z=g?.role==="admin",ne=g?.branchId,Se=async s=>{if(s.length<1){V([]);return}ue(!0);try{const t=ms.filter(d=>d.name.includes(s)||d.name.toLowerCase().includes(s.toLowerCase())||d.name.includes(s.toLowerCase()));if(t.length>0){V(t),X(!0),ue(!1);return}if(s.length>=2){const m=await(await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(s)}, Saudi Arabia&format=json&limit=5&countrycodes=sa`)).json();V(m||[]),X(!0)}else{const d=ms.slice(0,5);V(d),X(!0)}}catch(t){console.error("Error searching branch locations:",t),V([])}finally{ue(!1)}},a=s=>{b(s),setTimeout(()=>{Se(s)},500)},r=s=>{n({...i,address:s.name,latitude:parseFloat(s.lat),longitude:parseFloat(s.lon)}),b(""),X(!1),V([])},{data:L=[]}=$({queryKey:["/api/employees"],enabled:!!g}),pe=z?L:L.filter(s=>s.branchId===ne||s.role==="manager"||s.role==="admin"),{data:ke=[]}=$({queryKey:["/api/customers"],enabled:!!g}),{data:ie=[]}=$({queryKey:["/api/orders"],enabled:!!g,refetchInterval:g?5e3:!1}),Ne=z?ie:ie.filter(s=>s.branchId===ne),{data:Ke=[]}=$({queryKey:["/api/branches"],enabled:!!g}),Be=z?Ke:Ke.filter(s=>s.id===ne),Ee=L.filter(s=>s.role==="manager"||s.role==="admin"),Fe=U({mutationFn:async s=>{const t={nameAr:s.nameAr,nameEn:s.nameEn||void 0,address:s.address,phone:s.phone,city:s.city,managerName:s.managerName||void 0,mapsUrl:s.mapsUrl||void 0,location:{lat:s.latitude,lng:s.longitude},isActive:1,managerAssignment:s.managerAssignment},d=await fetch("/api/branches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!d.ok){const m=await d.json();throw new Error(m.error||"Failed to create branch")}return d.json()},onSuccess:()=>{I.invalidateQueries({queryKey:["/api/branches"]}),I.invalidateQueries({queryKey:["/api/employees"]}),T(!1),n({nameAr:"",nameEn:"",address:"",phone:"",city:"",managerName:"",mapsUrl:"",latitude:24.7136,longitude:46.6753}),J("existing"),te(""),re({fullName:"",username:"",phone:""}),C({title:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ±Ø¹ Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…"})},onError:s=>{C({title:"Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ±Ø¹",description:s.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ±Ø¹",variant:"destructive"})}}),Re=U({mutationFn:async s=>(await H("DELETE",`/api/branches/${s}`,{}),!0),onSuccess:()=>{I.invalidateQueries({queryKey:["/api/branches"]}),C({title:"ØªÙ… Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹ Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ±Ø¹ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…"})},onError:s=>{C({title:"Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹",description:s.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹",variant:"destructive"})}}),ye=U({mutationFn:async s=>{const t={nameAr:s.data.nameAr,nameEn:s.data.nameEn||void 0,address:s.data.address,phone:s.data.phone,city:s.data.city,managerName:s.data.managerName||void 0,mapsUrl:s.data.mapsUrl||void 0,location:{lat:s.data.latitude,lng:s.data.longitude},isActive:1},d=await fetch(`/api/branches/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!d.ok)try{const m=await d.json();throw new Error(m.error||"Failed to update branch")}catch{throw new Error("Failed to update branch - Server error")}return d.json()},onSuccess:()=>{I.invalidateQueries({queryKey:["/api/branches"]}),D(!1),w(null),n({nameAr:"",nameEn:"",address:"",phone:"",city:"",managerName:"",mapsUrl:"",latitude:24.7136,longitude:46.6753}),C({title:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹ Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹"})},onError:s=>{C({title:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹",description:s.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹",variant:"destructive"})}}),js=()=>{localStorage.removeItem("currentEmployee"),o("/employee/gateway")},vs=()=>{if(!i.nameAr||!i.address||!i.city||!i.phone){C({title:"Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©",description:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©",variant:"destructive"});return}if(Z==="new"&&(!M.fullName||!M.username||!M.phone)){C({title:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ± Ù†Ø§Ù‚ØµØ©",description:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯",variant:"destructive"});return}const s={...i,managerAssignment:Z==="new"?{type:"new",newManager:M}:W?{type:"existing",managerId:W}:void 0};Fe.mutate(s)},fs=()=>{if(u){if(!i.nameAr||!i.address||!i.city||!i.phone){C({title:"Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©",description:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©",variant:"destructive"});return}ye.mutate({id:u.id,data:i})}},Ns=s=>{w(s),n({nameAr:s.nameAr||"",nameEn:s.nameEn||"",address:s.address||"",phone:s.phone||"",city:s.city||"",managerName:s.managerName||"",mapsUrl:s.mapsUrl||"",latitude:s.location?.lat||24.7136,longitude:s.location?.lng||46.6753}),D(!0)},ys=()=>{try{const s=E.map(h=>{const ws=pe.find(Cs=>Cs.id===h.employeeId);return{"Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨":h.orderNumber,"Ø§Ù„ØªØ§Ø±ÙŠØ® ":h.createdAt?new Date(h.createdAt).toLocaleString("ar-SA"):"","Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„":h.customerInfo?.name||"","Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„":h.customerInfo?.phone||"","Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ":h.tableNumber||"",Ø§Ù„Ø­Ø§Ù„Ø©:h.status,"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹":h.paymentMethod==="cash"?"Ù†Ù‚Ø¯ÙŠ":h.paymentMethod,Ø§Ù„ÙƒØ§Ø´ÙŠØ±:ws?.fullName||"",Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:Number(h.totalAmount).toFixed(2)}}),t=qe.map(h=>({Ø§Ù„Ù…Ù†ØªØ¬:h.name,"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª":h.count,Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:h.revenue.toFixed(2)})),d=ze.map(h=>({Ø§Ù„Ø§Ø³Ù…:h.fullName,Ø§Ù„ÙˆØ¸ÙŠÙØ©:h.jobTitle,Ø§Ù„Ø¯ÙˆØ±:h.role==="manager"?"Ù…Ø¯ÙŠØ±":"ÙƒØ§Ø´ÙŠØ±","Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„":h.phone,"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª":h.orderCount||0,"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª":(h.totalSales||0).toFixed(2)})),m=G.book_new(),A=G.json_to_sheet(s),Pe=G.json_to_sheet(t),we=G.json_to_sheet(d);G.book_append_sheet(m,A,"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"),G.book_append_sheet(m,Pe,"Ø£ÙƒØ«Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹"),G.book_append_sheet(m,we,"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†");const K=`ØªÙ‚Ø±ÙŠØ±-Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª-${new Date().toLocaleDateString("ar-SA").replace(/\//g,"-")}.xlsx`;_s(m,K),C({title:"ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ù…Ù„Ù Excel"})}catch{C({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",variant:"destructive"})}},Te=U({mutationFn:async()=>{const s=await fetch("/api/admin/clear-all-data",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(!s.ok)throw new Error("Failed to clear data");return s.json()},onSuccess:s=>{I.invalidateQueries({queryKey:["/api/orders"]}),I.invalidateQueries({queryKey:["/api/customers"]}),C({title:"ØªÙ… Ø¨Ù†Ø¬Ø§Ø­",description:s.message,variant:"destructive"})},onError:()=>{C({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",variant:"destructive"})}});if(!g)return e.jsx(Fs,{message:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."});const E=(()=>{const s=new Date;return Ne.filter(t=>{if(!t.createdAt)return y==="all";const d=new Date(t.createdAt);if(isNaN(d.getTime()))return y==="all";switch(y){case"today":return d.toDateString()===s.toDateString();case"week":const m=new Date(s.getTime()-7*24*60*60*1e3);return d>=m;case"month":const A=new Date(s.getTime()-30*24*60*60*1e3);return d>=A;default:return!0}})})(),be=E.reduce((s,t)=>s+Number(t.totalAmount||0),0),Ue=E.filter(s=>s.status==="completed");Ue.reduce((s,t)=>s+Number(t.totalAmount||0),0),Ne.filter(s=>{if(!s.createdAt)return!1;const t=new Date(s.createdAt);if(isNaN(t.getTime()))return!1;const d=new Date;return t.toDateString()===d.toDateString()}).reduce((s,t)=>s+Number(t.totalAmount||0),0);const ze=pe.map(s=>{const t=s.id?.toString(),d=E.filter(m=>m.employeeId?.toString()===t);return{...s,orderCount:d.length,totalSales:d.reduce((m,A)=>m+Number(A.totalAmount||0),0)}}).sort((s,t)=>{const d={admin:0,manager:1,cashier:2},m=d[s.role]??3,A=d[t.role]??3;return m!==A?m-A:(t.totalSales||0)-(s.totalSales||0)}),bs=(()=>{const s={};return E.forEach(t=>{if(!t.createdAt)return;const d=new Date(t.createdAt);if(isNaN(d.getTime()))return;const m=d.toLocaleDateString("ar-SA",{month:"short",day:"numeric"});s[m]=(s[m]||0)+Number(t.totalAmount||0)}),Object.entries(s).map(([t,d])=>({date:t,revenue:Number(d.toFixed(2))})).slice(-14)})(),_e=(()=>{const s={};return E.forEach(t=>{s[t.paymentMethod]=(s[t.paymentMethod]||0)+1}),Object.entries(s).map(([t,d])=>({name:t==="cash"?"Ù†Ù‚Ø¯ÙŠ":t,value:d}))})(),qe=(()=>{const s={};return E.forEach(t=>{(Array.isArray(t.items)?t.items:[]).forEach(m=>{const A=m.coffeeItem?.nameAr||m.nameAr||"Ù…Ø´Ø±ÙˆØ¨";s[A]||(s[A]={count:0,revenue:0}),s[A].count+=m.quantity||0,s[A].revenue+=(m.quantity||0)*Number(m.price||m.coffeeItem?.price||0)})}),Object.entries(s).map(([t,d])=>({name:t,count:d.count,revenue:Number(d.revenue.toFixed(2))})).sort((t,d)=>d.revenue-t.revenue).slice(0,10)})(),$e=["hsl(var(--primary))","hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))","hsl(var(--accent))","hsl(var(--secondary))"],ge=(()=>{if(y==="today"||y==="all")return 0;const s=new Date,t=y==="week"?new Date(s.getTime()-7*24*60*60*1e3):y==="month"?new Date(s.getTime()-30*24*60*60*1e3):null;if(!t)return 0;const d=Ne.filter(K=>{if(!K.createdAt)return!1;const h=new Date(K.createdAt);return!isNaN(h.getTime())&&h>=t}),m=t,A=y==="week"?new Date(t.getTime()-7*24*60*60*1e3):new Date(t.getTime()-30*24*60*60*1e3),Pe=Ne.filter(K=>{if(!K.createdAt)return!1;const h=new Date(K.createdAt);return!isNaN(h.getTime())&&h>=A&&h<m}),we=d.reduce((K,h)=>K+Number(h.totalAmount||0),0),Ce=Pe.reduce((K,h)=>K+Number(h.totalAmount||0),0);return Ce===0?we>0?100:0:Number(((we-Ce)/Ce*100).toFixed(1))})();return e.jsx("div",{className:"min-h-screen bg-background p-6",dir:"rtl",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("header",{className:"bg-card backdrop-blur-sm rounded-2xl border border-border p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-primary rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ts,{className:"w-7 h-7 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±"}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ",g.fullName]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(p,{variant:"outline",onClick:js,"data-testid":"button-logout",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"}),e.jsxs(p,{variant:"outline",onClick:()=>o("/employee/dashboard"),"data-testid":"button-back",children:[e.jsx(Ps,{className:"w-4 h-4 ml-2"}),"Ø±Ø¬ÙˆØ¹"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 mb-6",children:[e.jsxs(p,{onClick:()=>o("/employee/pos"),className:"h-20 flex flex-col gap-2 rounded-xl","data-testid":"button-pos",children:[e.jsx(qs,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Ù†Ù‚Ø§Ø· Ø§Ù„Ø¨ÙŠØ¹"})]}),e.jsxs(p,{onClick:()=>o("/manager/inventory"),variant:"outline",className:"h-20 flex flex-col gap-2 rounded-xl","data-testid":"button-inventory",children:[e.jsx($s,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"})]}),e.jsxs(p,{onClick:()=>o("/manager/attendance"),variant:"outline",className:"h-20 flex flex-col gap-2 rounded-xl","data-testid":"button-attendance",children:[e.jsx(Ge,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„Ø­Ø¶ÙˆØ±"})]}),e.jsxs(p,{onClick:ys,variant:"outline",className:"h-20 flex flex-col gap-2 rounded-xl","data-testid":"button-export",children:[e.jsx(Is,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"ØªØµØ¯ÙŠØ± Excel"})]}),e.jsxs(le,{value:y,onValueChange:s=>x(s),children:[e.jsxs(de,{className:"h-20 flex flex-col gap-2 bg-card border-border rounded-xl",children:[e.jsx(Qs,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:y==="today"?"Ø§Ù„ÙŠÙˆÙ…":y==="week"?"Ø£Ø³Ø¨ÙˆØ¹":y==="month"?"Ø´Ù‡Ø±":"Ø§Ù„ÙƒÙ„"})]}),e.jsxs(ce,{className:"bg-card border-border",children:[e.jsx(P,{value:"today",children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsx(P,{value:"week",children:"Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹"}),e.jsx(P,{value:"month",children:"Ø¢Ø®Ø± Ø´Ù‡Ø±"}),e.jsx(P,{value:"all",children:"ÙƒÙ„ Ø§Ù„ÙØªØ±Ø©"})]})]}),z&&e.jsxs(p,{variant:"destructive",onClick:()=>{confirm("ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø³ÙŠØ­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡! Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ")&&Te.mutate()},disabled:Te.isPending,className:"h-20 flex flex-col gap-2 rounded-xl","data-testid":"button-clear-all-data",children:[e.jsx(Ve,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs",children:Te.isPending?"Ø¬Ø§Ø±ÙŠ...":"ØªÙ†Ø¸ÙŠÙ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs(f,{className:"rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-primary"}),e.jsx(S,{className:"pb-2 pt-4",children:e.jsxs(k,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(fe,{className:"w-4 h-4 text-primary"})}),"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-foreground",children:ke.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ø¹Ù…ÙŠÙ„ Ù…Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…"})]})]}),e.jsxs(f,{className:"rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-accent"}),e.jsx(S,{className:"pb-2 pt-4",children:e.jsxs(k,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center",children:e.jsx(Ds,{className:"w-4 h-4 text-accent"})}),"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-foreground",children:E.length}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(q,{variant:"secondary",children:[Ue.length," Ù…ÙƒØªÙ…Ù„"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:y==="today"?"Ø§Ù„ÙŠÙˆÙ…":y==="week"?"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹":y==="month"?"Ø§Ù„Ø´Ù‡Ø±":"Ø§Ù„ÙƒÙ„"})]})]})]}),e.jsxs(f,{className:"rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-primary"}),e.jsx(S,{className:"pb-2 pt-4",children:e.jsxs(k,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(es,{className:"w-4 h-4 text-primary"})}),"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-primary",children:be.toFixed(2)}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Ø±.Ø³"}),ge!==0&&e.jsxs(q,{variant:ge>0?"default":"destructive",children:[ge>0?e.jsx(ss,{className:"w-3 h-3 ml-1"}):e.jsx(Vs,{className:"w-3 h-3 ml-1"}),ge>0?"+":"",ge,"%"]})]})]})]}),e.jsxs(f,{className:"rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-secondary"}),e.jsx(S,{className:"pb-2 pt-4",children:e.jsxs(k,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-secondary/10 rounded-lg flex items-center justify-center",children:e.jsx(as,{className:"w-4 h-4 text-secondary-foreground"})}),"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨"]})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-4xl font-bold text-foreground",children:E.length>0?(be/E.length).toFixed(2):"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ Ù„ÙƒÙ„ Ø·Ù„Ø¨"})]})]})]}),e.jsxs(xs,{defaultValue:"orders",className:"space-y-4",children:[e.jsxs(us,{className:"grid w-full grid-cols-8 h-14",children:[e.jsx(B,{value:"orders",className:"rounded-lg",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(B,{value:"analytics",className:"rounded-lg",children:"Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª"}),e.jsx(B,{value:"top-items",className:"rounded-lg",children:"Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹"}),e.jsx(B,{value:"employees",className:"rounded-lg",children:"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"}),e.jsx(B,{value:"branches",className:"rounded-lg",children:"Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsx(B,{value:"coupons",className:"rounded-lg",children:"Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª"}),e.jsx(B,{value:"delivery",className:"rounded-lg",children:"Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx(B,{value:"erp",className:"rounded-lg",children:"Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"})]}),e.jsx(R,{value:"orders",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(S,{children:[e.jsx(k,{children:"Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx(_,{children:"Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:E.length===0?e.jsx(Xe,{title:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª",description:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"}):E.slice(0,10).map(s=>(pe.find(t=>t.id===s.employeeId),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border border-border rounded-xl bg-muted/30 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(ts,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-foreground",children:["Ø·Ù„Ø¨ #",s.orderNumber]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:s.createdAt?new Date(s.createdAt).toLocaleString("ar-SA"):""}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.customerInfo?.name||"Ø¹Ù…ÙŠÙ„"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 justify-between sm:justify-end",children:[e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsxs("p",{className:"font-bold text-primary",children:[Number(s.totalAmount).toFixed(2)," Ø±.Ø³"]}),e.jsx(q,{variant:s.status==="completed"?"default":"secondary",children:s.status})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>o(`/order-receipt/${s.id}`),children:e.jsx(rs,{className:"w-4 h-4"})})]})]},s.id)))})})]})}),e.jsx(R,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(f,{children:[e.jsx(S,{children:e.jsx(k,{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"})}),e.jsx(N,{className:"h-[300px]",children:e.jsx(De,{width:"100%",height:"100%",children:e.jsxs(Ys,{data:bs,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(ns,{strokeDasharray:"3 3",vertical:!1}),e.jsx(is,{dataKey:"date"}),e.jsx(ls,{}),e.jsx(Me,{}),e.jsx(Zs,{type:"monotone",dataKey:"revenue",name:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),e.jsxs(f,{children:[e.jsx(S,{children:e.jsx(k,{children:"ØªÙˆØ²ÙŠØ¹ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹"})}),e.jsx(N,{className:"h-[300px]",children:e.jsx(De,{width:"100%",height:"100%",children:e.jsxs(Js,{children:[e.jsx(Ws,{data:_e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:_e.map((s,t)=>e.jsx(Xs,{fill:$e[t%$e.length]},`cell-${t}`))}),e.jsx(Me,{}),e.jsx(Hs,{})]})})})]})]})}),e.jsx(R,{value:"top-items",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(S,{children:[e.jsx(k,{children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹"}),e.jsx(_,{children:"ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"})]}),e.jsx(N,{children:e.jsx("div",{className:"h-[400px]",children:e.jsx(De,{width:"100%",height:"100%",children:e.jsxs(ds,{data:qe,layout:"vertical",margin:{left:40},children:[e.jsx(ns,{strokeDasharray:"3 3",horizontal:!1}),e.jsx(is,{type:"number"}),e.jsx(ls,{dataKey:"name",type:"category",width:100}),e.jsx(Me,{}),e.jsx(ds,{dataKey:"count",name:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})})})]})}),e.jsx(R,{value:"employees",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(S,{children:[e.jsx(k,{children:"Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"}),e.jsx(_,{children:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù"})]}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ze.map(s=>{const t=s.id?.toString();return e.jsxs("div",{className:"p-4 border border-border rounded-xl bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(fe,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s.fullName}),e.jsx(q,{variant:"outline",className:"text-[10px]",children:s.role==="admin"?"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…":s.role==="manager"?"Ù…Ø¯ÙŠØ±":"Ù…ÙˆØ¸Ù"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:"}),e.jsx("span",{className:"font-bold",children:s.orderCount||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª:"}),e.jsxs("span",{className:"font-bold text-primary",children:[(s.totalSales||0).toFixed(2)," Ø±.Ø³"]})]})]})]},t)})})})]})}),e.jsx(R,{value:"branches",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex justify-between items-center gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-primary",children:"Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsx(_,{children:"Ø¥Ø¯Ø§Ø±Ø© ÙØ±ÙˆØ¹ Ø§Ù„Ù…Ù‚Ù‡Ù‰"})]}),z&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{"data-testid":"button-add-branch",onClick:()=>T(!0),className:"bg-accent hover:bg-accent",children:[e.jsx(ve,{className:"w-4 h-4 ml-2"}),"Ø¥Ø¶Ø§ÙØ© ÙØ±Ø¹"]}),e.jsx(oe,{open:F,onOpenChange:T,children:e.jsxs(me,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto bg-[#708f87]",children:[e.jsx(he,{children:e.jsx(xe,{className:"text-primary text-xl",children:"Ø¥Ø¶Ø§ÙØ© ÙØ±Ø¹ Ø¬Ø¯ÙŠØ¯"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"nameAr",children:"Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ (Ø¹Ø±Ø¨ÙŠ) *"}),e.jsx(c,{id:"nameAr",value:i.nameAr,onChange:s=>n({...i,nameAr:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: ÙØ±Ø¹ Ø§Ù„Ø±ÙŠØ§Ø¶","data-testid":"input-branch-name-ar"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"nameEn",children:"Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)"}),e.jsx(c,{id:"nameEn",value:i.nameEn,onChange:s=>n({...i,nameEn:s.target.value}),placeholder:"Example: Riyadh Branch"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"address",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *"}),e.jsx(c,{id:"address",value:i.address,onChange:s=>n({...i,address:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯","data-testid":"input-branch-address"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"city",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©*"}),e.jsx(c,{id:"city",value:i.city,onChange:s=>n({...i,city:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶","data-testid":"input-branch-city"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"phone",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *"}),e.jsx(c,{id:"phone",value:i.phone,onChange:s=>n({...i,phone:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 0501234567","data-testid":"input-branch-phone"})]}),e.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-muted",children:[e.jsxs(l,{className:"text-primary font-semibold flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),"ØªØ¹ÙŠÙŠÙ† Ù…Ø¯ÙŠØ± Ø§Ù„ÙØ±Ø¹"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"managerType",checked:Z==="existing",onChange:()=>J("existing"),className:"w-4 h-4 accent-primary","data-testid":"radio-existing-manager"}),e.jsx("span",{className:"text-foreground",children:"ØªØ¹ÙŠÙŠÙ† Ù…Ø¯ÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"managerType",checked:Z==="new",onChange:()=>J("new"),className:"w-4 h-4 accent-primary","data-testid":"radio-new-manager"}),e.jsx("span",{className:"text-foreground",children:"Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯ÙŠØ± Ø¬Ø¯ÙŠØ¯"})]})]}),Z==="existing"?e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{children:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠØ±"}),e.jsxs(le,{value:W,onValueChange:te,children:[e.jsx(de,{"data-testid":"select-existing-manager",children:e.jsx(je,{placeholder:"Ø§Ø®ØªØ± Ù…Ø¯ÙŠØ±Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹"})}),e.jsx(ce,{children:Ee.length===0?e.jsx(P,{value:"none",disabled:!0,children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¯ÙŠØ±ÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ†"}):Ee.map(s=>e.jsxs(P,{value:s.id||"",children:[s.fullName," - ",s.role==="admin"?"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…":"Ù…Ø¯ÙŠØ±"]},s.id))})]}),Ee.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¯ÙŠØ±ÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ†. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯ÙŠØ± Ø¬Ø¯ÙŠØ¯."})]}):e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"mgr-name",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *"}),e.jsx(c,{id:"mgr-name",value:M.fullName,onChange:s=>re({...M,fullName:s.target.value}),placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø¯ÙŠØ±","data-testid":"input-new-manager-name"})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"mgr-user",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… *"}),e.jsx(c,{id:"mgr-user",value:M.username,onChange:s=>re({...M,username:s.target.value}),placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¯Ø®ÙˆÙ„","data-testid":"input-new-manager-username"})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"mgr-phone",children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ *"}),e.jsx(c,{id:"mgr-phone",value:M.phone,onChange:s=>re({...M,phone:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 05XXXXXXXX","data-testid":"input-new-manager-phone"})]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2 relative",children:[e.jsx(l,{children:"Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ - Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±Ø¹... (Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø¯Ù…Ø§Ù…)",value:j,onChange:s=>a(s.target.value),onFocus:()=>j&&X(!0),className:"text-right pr-10","data-testid":"input-branch-search"}),ae&&e.jsx("div",{className:"absolute right-3 top-3 text-primary",children:e.jsx("div",{className:"animate-spin",children:"âŸ³"})}),se&&Q.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-card border border-border rounded-md shadow-lg z-50 max-h-64 overflow-y-auto",children:Q.map((s,t)=>e.jsx("button",{onClick:()=>r(s),className:"w-full text-right px-4 py-3 hover:bg-primary/10 dark:hover:bg-primary/20 border-b border-border last:border-b-0 transition-colors","data-testid":`branch-location-result-${t}`,children:e.jsxs("div",{className:"flex items-end gap-2 justify-end",children:[e.jsx(ee,{className:"w-4 h-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:s.name})]})},t))}),se&&Q.length===0&&j&&!ae&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-card border border-border rounded-md shadow-lg z-50 p-3",children:e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{children:"Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙØ±Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©"}),e.jsx("div",{className:"h-[250px] rounded-lg overflow-hidden border border-border",children:e.jsx(cs,{initialLat:i.latitude,initialLng:i.longitude,onLocationSelect:(s,t)=>n({...i,latitude:s,longitude:t})})}),e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: 24.713600"}),e.jsx("span",{children:"Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: 46.675300"})]})]})]}),e.jsx(p,{onClick:vs,disabled:Fe.isPending,className:"w-full h-12 text-lg","data-testid":"button-save-branch",children:Fe.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ÙØ±Ø¹"})]})]})}),z&&e.jsx(oe,{open:Y,onOpenChange:D,children:e.jsxs(me,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(he,{children:e.jsx(xe,{className:"text-2xl font-bold",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ±Ø¹"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"edit-name-ar",children:"Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© *"}),e.jsx(c,{id:"edit-name-ar",value:i.nameAr,onChange:s=>n({...i,nameAr:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: ÙØ±Ø¹ Ø§Ù„Ø±ÙŠØ§Ø¶","data-testid":"input-edit-name-ar"})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"edit-name-en",children:"Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"}),e.jsx(c,{id:"edit-name-en",value:i.nameEn,onChange:s=>n({...i,nameEn:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Riyadh Branch","data-testid":"input-edit-name-en"})]})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"edit-address",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *"}),e.jsx(c,{id:"edit-address",value:i.address,onChange:s=>n({...i,address:s.target.value}),placeholder:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„","data-testid":"input-edit-address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"edit-phone",children:"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ *"}),e.jsx(c,{id:"edit-phone",value:i.phone,onChange:s=>n({...i,phone:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: 0501234567","data-testid":"input-edit-phone"})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"edit-city",children:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© *"}),e.jsx(c,{id:"edit-city",value:i.city,onChange:s=>n({...i,city:s.target.value}),placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©","data-testid":"input-edit-city"})]})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(l,{htmlFor:"edit-manager-name",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ±"}),e.jsx(c,{id:"edit-manager-name",value:i.managerName,onChange:s=>n({...i,managerName:s.target.value}),placeholder:"Ø§Ø³Ù… Ù…Ø¯ÙŠØ± Ø§Ù„ÙØ±Ø¹","data-testid":"input-edit-manager-name"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2 relative",children:[e.jsx(l,{children:"Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ - Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±Ø¹... (Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø¯Ù…Ø§Ù…)",value:j,onChange:s=>a(s.target.value),onFocus:()=>j&&X(!0),className:"text-right pr-10","data-testid":"input-branch-search-edit"}),ae&&e.jsx("div",{className:"absolute right-3 top-3 text-primary",children:e.jsx("div",{className:"animate-spin",children:"âŸ³"})}),se&&Q.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-card border border-border rounded-md shadow-lg z-50 max-h-64 overflow-y-auto",children:Q.map((s,t)=>e.jsx("button",{onClick:()=>r(s),className:"w-full text-right px-4 py-3 hover:bg-primary/10 dark:hover:bg-primary/20 border-b border-border last:border-b-0 transition-colors","data-testid":`branch-location-result-edit-${t}`,children:e.jsxs("div",{className:"flex items-end gap-2 justify-end",children:[e.jsx(ee,{className:"w-4 h-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:s.name})]})},t))}),se&&Q.length===0&&j&&!ae&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-card border border-border rounded-md shadow-lg z-50 p-3",children:e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{children:"Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙØ±Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©"}),e.jsx("div",{className:"h-[250px] rounded-lg overflow-hidden border border-border",children:e.jsx(cs,{initialLat:i.latitude,initialLng:i.longitude,onLocationSelect:(s,t)=>n({...i,latitude:s,longitude:t})})}),e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ",i.latitude.toFixed(6)]}),e.jsxs("span",{children:["Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ",i.longitude.toFixed(6)]})]})]})]}),e.jsx(p,{onClick:fs,disabled:ye.isPending,className:"w-full h-12 text-lg","data-testid":"button-save-edit-branch",children:ye.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...":"ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹"})]})]})})]})]})}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Be.length===0?e.jsx(Xe,{title:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ±ÙˆØ¹",description:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙØ±ÙˆØ¹ Ù…Ø³Ø¬Ù„Ø©"}):Be.map(s=>e.jsx(f,{className:"border-border/50 hover:border-primary/50 transition-colors",children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(ee,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:s.nameAr}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.city})]})]}),e.jsx(q,{variant:s.isActive===1||s.isActive===!0?"default":"secondary",children:s.isActive===1||s.isActive===!0?"Ù†Ø´Ø·":"ØºÙŠØ± Ù†Ø´Ø·"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:s.managerName||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¯ÙŠØ±"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:s.address})]})]}),z&&e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-border",children:[e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Ns(s),disabled:ye.isPending,"data-testid":"button-edit-branch",children:[e.jsx(Gs,{className:"w-4 h-4 ml-2"}),"ØªØ¹Ø¯ÙŠÙ„"]}),e.jsxs(p,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙØ±Ø¹ØŸ")&&Re.mutate(s.id)},disabled:Re.isPending,"data-testid":"button-delete-branch",children:[e.jsx(Ve,{className:"w-4 h-4 ml-2"}),"Ø­Ø°Ù"]})]})]})},s.id))})})]})}),e.jsx(R,{value:"coupons",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(S,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(k,{children:"Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø®ØµÙ…"}),e.jsx(_,{children:"Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø®ØµÙ… Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})})}),e.jsx(N,{children:e.jsx(ta,{employeeId:g?.id||""})})]})}),e.jsx(R,{value:"delivery",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(S,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(k,{children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx(_,{children:"Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†Ø§Ø¯ÙŠØ¨ Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆÙ…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆØ§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©"})]})})}),e.jsx(N,{children:e.jsx(ra,{})})]})}),e.jsx(R,{value:"erp",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{children:"Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±"}),e.jsx(_,{children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"})]}),e.jsxs(p,{onClick:()=>o("/erp/accounting"),"data-testid":"button-open-erp",children:[e.jsx(rs,{className:"w-4 h-4 ml-2"}),"ÙØªØ­ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©"]})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(f,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:e.jsxs(N,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:e.jsx(ss,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[be.toFixed(2)," Ø±.Ø³"]})]})]})}),e.jsx(f,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:e.jsxs(N,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(ts,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:E.length})]})]})}),e.jsx(f,{className:"bg-purple-50 dark:bg-purple-950/20 border-purple-200 dark:border-purple-800",children:e.jsxs(N,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center",children:e.jsx(es,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[E.length>0?(be/E.length).toFixed(2):"0.00"," Ø±.Ø³"]})]})]})})]}),e.jsxs("div",{className:"mt-4 p-4 bg-muted/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª"}),e.jsx("li",{children:"Ù‚ÙŠÙˆØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"}),e.jsx("li",{children:"Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}),e.jsx("li",{children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠØ©"}),e.jsx("li",{children:"Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ ZATCA"})]})]})]})]})})]})]})})}export{qa as default};
