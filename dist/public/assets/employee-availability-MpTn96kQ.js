import{j as a}from"./vendor-ui-DJm-zmnP.js";import{r as m}from"./vendor-react-Bzsngnqy.js";import{a as x,b as h}from"./vendor-query-CX8ZYlKb.js";import{e as p,i as c,C as v,x as f,y as j,f as y,j as b,B as g,k as N,N as S}from"./index-CLvpp2UE.js";import{S as C,a as w,b as _,c as k,d as t}from"./select-BzAjeBJu.js";import"./vendor-utils-BKCsaWdX.js";import"./chevron-down-CqdH-ack.js";function H(){const{toast:i}=p(),[l,o]=m.useState({}),{data:r=[],isLoading:d}=x({queryKey:["/api/coffee-items"]}),n=h({mutationFn:async e=>{const s=await fetch(`/api/coffee-items/${e.itemId}/availability`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({availabilityStatus:e.availabilityStatus})});if(!s.ok)throw new Error("Failed to update");return s.json()},onSuccess:()=>{S.invalidateQueries({queryKey:["/api/coffee-items"]}),i({title:"تم التحديث",description:"تم تحديث حالة المشروب بنجاح"})},onError:()=>{i({title:"خطأ",description:"فشل تحديث حالة المشروب",variant:"destructive"})}});return d?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})}):a.jsx("div",{dir:"rtl",className:"min-h-screen bg-background p-4 md:p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"font-amiri text-3xl font-bold text-primary flex items-center gap-2",children:[a.jsx(c,{className:"w-8 h-8"}),"إدارة توفر المشروبات"]}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"تغيير حالة توفر المشروبات (متاح / نفذت الكمية / قريباً)"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>a.jsxs(v,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(f,{className:"pb-3",children:a.jsx(j,{className:"text-lg font-amiri text-right",children:e.nameAr})}),a.jsxs(y,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(b,{variant:e.availabilityStatus==="available"?"default":"secondary",children:[e.availabilityStatus==="available"&&"متاح",e.availabilityStatus==="out_of_stock"&&"نفذت الكمية",e.availabilityStatus==="coming_soon"&&"قريباً",e.availabilityStatus==="temporarily_unavailable"&&"غير متوفر مؤقتاً"]}),a.jsxs("span",{className:"text-2xl font-bold text-primary",children:[e.price," ريال"]})]}),a.jsxs(C,{value:l[e.id]||e.availabilityStatus||"available",onValueChange:s=>{o(u=>({...u,[e.id]:s}))},children:[a.jsx(w,{className:"text-right",children:a.jsx(_,{placeholder:"اختر الحالة"})}),a.jsxs(k,{children:[a.jsx(t,{value:"available",children:"متاح"}),a.jsx(t,{value:"out_of_stock",children:"نفذت الكمية"}),a.jsx(t,{value:"coming_soon",children:"قريباً"}),a.jsx(t,{value:"temporarily_unavailable",children:"غير متوفر مؤقتاً"})]})]}),a.jsxs(g,{onClick:()=>{const s=l[e.id]||e.availabilityStatus||"available";n.mutate({itemId:e.id,availabilityStatus:s})},disabled:n.isPending,className:"w-full",children:[a.jsx(N,{className:"w-4 h-4 ml-2"}),"تحديث الحالة"]})]})]},e.id))}),r.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(c,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground text-lg",children:"لا توجد مشروبات"})]})]})})}export{H as default};
