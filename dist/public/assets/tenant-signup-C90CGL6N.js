import{j as e}from"./vendor-ui-DJm-zmnP.js";import{r as x}from"./vendor-react-Bzsngnqy.js";import{c as y,e as A,C as o,f as m,x as C,y as P,V as S,L as i,I as c,a7 as w,B as F,v as D}from"./index-CLvpp2UE.js";import{S as T,a as L,b as I,c as z,d as B}from"./select-BzAjeBJu.js";import{C as g}from"./circle-check-CNDbPLNF.js";import{L as f}from"./loader-DGpp_IFR.js";import"./vendor-query-CX8ZYlKb.js";import"./vendor-utils-BKCsaWdX.js";import"./chevron-down-CqdH-ack.js";const h=[{id:"free",nameAr:"مجاني",nameEn:"Free",price:"0",features:["فرع واحد","100 طلب/شهر","بدون دعم"]},{id:"starter",nameAr:"مبتدئ",nameEn:"Starter",price:"299",features:["فرعين","1000 طلب/شهر","بريد إلكتروني"]},{id:"professional",nameAr:"احترافي",nameEn:"Professional",price:"999",features:["5 فروع","طلبات غير محدودة","دعم كامل"]},{id:"enterprise",nameAr:"enterprise",nameEn:"Enterprise",price:"يتم تحديده",features:["فروع غير محدودة","مميزات مخصصة","حساب مخصص"]}];function J(){const[,b]=y(),{toast:d}=A(),[t,u]=x.useState(!1),[j,N]=x.useState(!1),[n,v]=x.useState("professional"),[a,k]=x.useState({nameAr:"",nameEn:"",email:"",phone:"",plan:"professional",contactPersonAr:"",contactPersonEn:"",notes:""}),r=(s,l)=>{k(p=>({...p,[s]:l}))},E=async s=>{if(s.preventDefault(),!a.nameAr.trim()){d({title:"خطأ",description:"الرجاء إدخال اسم المتجر بالعربية",variant:"destructive"});return}if(!a.email.trim()||!a.email.includes("@")){d({title:"خطأ",description:"الرجاء إدخال بريد إلكتروني صحيح",variant:"destructive"});return}if(!a.phone.trim()){d({title:"خطأ",description:"الرجاء إدخال رقم الهاتف",variant:"destructive"});return}u(!0);try{const l={nameAr:a.nameAr,nameEn:a.nameEn||a.nameAr,type:"client",status:"active",subscription:{plan:a.plan,status:"active",startDate:new Date,renewalDate:new Date(Date.now()+2592e6)},billing:{email:a.email,phone:a.phone,contactPersonAr:a.contactPersonAr,contactPersonEn:a.contactPersonEn,notes:a.notes},features:{inventoryTracking:n!=="free",loyaltyProgram:["professional","enterprise"].includes(n),zatca:["professional","enterprise"].includes(n),analytics:["professional","enterprise"].includes(n),customTheme:n==="enterprise"}},O=await(await D("POST","/api/admin/tenants",l)).json();N(!0),d({title:"تم الإنشاء بنجاح!",description:`تم إنشاء متجرك "${a.nameAr}" بنجاح`}),setTimeout(()=>{b("/")},2e3)}catch(l){console.error("Signup error:",l),d({title:"خطأ",description:l.message||"حدث خطأ أثناء إنشاء المتجر",variant:"destructive"})}finally{u(!1)}};return j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-background dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsx(o,{className:"w-full max-w-md",children:e.jsxs(m,{className:"pt-12 text-center",children:[e.jsx(g,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-foreground mb-2",children:"تم الإنشاء بنجاح!"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground mb-6",children:"جاري إعادة التوجيه إلى الصفحة الرئيسية..."}),e.jsx(f,{className:"w-6 h-6 animate-spin text-accent mx-auto"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-background dark:from-slate-950 dark:to-slate-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground dark:text-foreground mb-2",children:"انضم إلى Menuza"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground text-lg",children:"أكمل البيانات الخاصة بمتجرك لبدء رحلتك مع نظام إدارة المقاهي الأفضل"})]}),e.jsxs(o,{className:"shadow-lg mb-8",children:[e.jsxs(C,{children:[e.jsx(P,{children:"بيانات المتجر"}),e.jsx(S,{children:"أدخل معلومات متجرك والخطة المناسبة لك"})]}),e.jsx(m,{children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"nameAr",className:"block mb-2 font-semibold",children:"اسم المتجر (عربي) *"}),e.jsx(c,{id:"nameAr",placeholder:"مثال: قهوة الواحة",value:a.nameAr,onChange:s=>r("nameAr",s.target.value),className:"text-right","data-testid":"input-business-name-ar",disabled:t})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"nameEn",className:"block mb-2 font-semibold",children:"اسم المتجر (English)"}),e.jsx(c,{id:"nameEn",placeholder:"e.g., Oasis Coffee",value:a.nameEn,onChange:s=>r("nameEn",s.target.value),className:"text-left","data-testid":"input-business-name-en",disabled:t})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",className:"block mb-2 font-semibold",children:"البريد الإلكتروني *"}),e.jsx(c,{id:"email",type:"email",placeholder:"your@email.com",value:a.email,onChange:s=>r("email",s.target.value),"data-testid":"input-email",disabled:t})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"phone",className:"block mb-2 font-semibold",children:"رقم الهاتف *"}),e.jsx(c,{id:"phone",type:"tel",placeholder:"+966 50 xxx xxxx",value:a.phone,onChange:s=>r("phone",s.target.value),"data-testid":"input-phone",disabled:t})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"contactPersonAr",className:"block mb-2 font-semibold",children:"اسم جهة الاتصال (عربي)"}),e.jsx(c,{id:"contactPersonAr",placeholder:"الاسم الكامل",value:a.contactPersonAr,onChange:s=>r("contactPersonAr",s.target.value),className:"text-right","data-testid":"input-contact-person-ar",disabled:t})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"contactPersonEn",className:"block mb-2 font-semibold",children:"جهة الاتصال (English)"}),e.jsx(c,{id:"contactPersonEn",placeholder:"Full Name",value:a.contactPersonEn,onChange:s=>r("contactPersonEn",s.target.value),className:"text-left","data-testid":"input-contact-person-en",disabled:t})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"plan",className:"block mb-4 font-semibold",children:"اختر الخطة المناسبة *"}),e.jsxs(T,{value:n,onValueChange:s=>{v(s),r("plan",s)},children:[e.jsx(L,{"data-testid":"select-plan",disabled:t,children:e.jsx(I,{})}),e.jsx(z,{children:h.map(s=>e.jsx(B,{value:s.id,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{children:s.nameAr}),e.jsxs("span",{className:"text-gray-500",children:["(",s.nameEn,")"]}),e.jsxs("span",{className:"text-accent font-semibold",children:[s.price," ر.س"]})]})},s.id))})]})]}),h.find(s=>s.id===n)&&e.jsxs("div",{className:"bg-background dark:bg-card p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-foreground dark:text-foreground mb-3",children:"مميزات الخطة:"}),e.jsx("ul",{className:"space-y-2",children:h.find(s=>s.id===n)?.features.map((s,l)=>e.jsxs("li",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(g,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),s]},l))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",className:"block mb-2 font-semibold",children:"ملاحظات إضافية"}),e.jsx(w,{id:"notes",placeholder:"أي معلومات إضافية تود أن تخبرنا بها...",value:a.notes,onChange:s=>r("notes",s.target.value),className:"text-right resize-none","data-testid":"textarea-notes",disabled:t,rows:4})]}),e.jsx(F,{type:"submit",className:"w-full bg-primary hover:bg-primary text-white font-bold py-3 text-lg",disabled:t,"data-testid":"button-submit-signup",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 animate-spin"}),"جاري الإنشاء..."]}):"إنشاء متجري الآن"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(o,{className:"bg-white dark:bg-card",children:e.jsxs(m,{className:"pt-6",children:[e.jsx("div",{className:"text-3xl font-bold text-accent mb-2",children:"100%"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground",children:"بدء فوري بدون انتظار"})]})}),e.jsx(o,{className:"bg-white dark:bg-card",children:e.jsxs(m,{className:"pt-6",children:[e.jsx("div",{className:"text-3xl font-bold text-accent mb-2",children:"24/7"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground",children:"دعم عملاء متواصل"})]})}),e.jsx(o,{className:"bg-white dark:bg-card",children:e.jsxs(m,{className:"pt-6",children:[e.jsx("div",{className:"text-3xl font-bold text-accent mb-2",children:"∞"}),e.jsx("p",{className:"text-muted-foreground dark:text-muted-foreground",children:"قابل للتوسع بلا حدود"})]})})]})]})})}export{J as default};
