import{j as e}from"./vendor-ui-DJm-zmnP.js";import{r as l}from"./vendor-react-Bzsngnqy.js";import{l as pe,c as je,i as ge,B as r,A as z,C as i,f as d,T as ue,Y as Ne,I as Q,V as be,x as X,y as H,j as h,k as fe,a2 as ye,r as C,ab as ve,ac as we,ad as J,o as Y}from"./index-61RjstaY.js";import{S as A,a as B,b as T,c as O,d as c}from"./select-BgcBxbEj.js";import{utils as _,writeFile as ke}from"./xlsx-62rwurJE.js";import{U as Se}from"./users-Btf_-tK9.js";import{C as I}from"./circle-check-C68tr6Vl.js";import{C as y}from"./circle-x-D9GYVDcC.js";import{C as L}from"./calendar-Cex3TfGh.js";import{F as Ce}from"./file-text-tC1Q1Af5.js";import{C as v}from"./camera-v_eqnnci.js";import"./vendor-query-CX8ZYlKb.js";import"./vendor-utils-BKCsaWdX.js";import"./chevron-down-BsuQiE4E.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function Ve(){const[,g]=je(),[p,G]=l.useState(null),[K,W]=l.useState([]),[Z,F]=l.useState(!0),[u,q]=l.useState(new Date().toISOString().split("T")[0]),[ee,se]=l.useState([]),[N,te]=l.useState("all"),[w,ae]=l.useState("all"),[k,le]=l.useState("all"),[b,ce]=l.useState(""),[$,m]=l.useState(null),[M,ne]=l.useState("table"),[f,S]=l.useState([]),[R,P]=l.useState(null),[E,V]=l.useState(null);l.useEffect(()=>{const s=localStorage.getItem("currentEmployee");if(s){const t=JSON.parse(s);if(t.role!=="manager"&&t.role!=="admin"&&t.role!=="owner"){g("/employee/gateway");return}G(t)}else g("/employee/gateway")},[g]),l.useEffect(()=>{p&&(xe(),he(),re())},[p,u,N]);const re=async()=>{try{const s=await fetch("/api/leave-requests/pending",{credentials:"include"});if(s.ok){const t=await s.json();S(t)}}catch(s){console.error("Error fetching leave requests:",s)}},ie=async s=>{P(s);try{(await fetch(`/api/leave-requests/${s}/approve`,{method:"POST",credentials:"include"})).ok&&S(f.filter(x=>x.id!==s))}catch(t){console.error("Error approving leave request:",t)}finally{P(null)}},de=async s=>{V(s);try{(await fetch(`/api/leave-requests/${s}/reject`,{method:"POST",credentials:"include"})).ok&&S(f.filter(x=>x.id!==s))}catch(t){console.error("Error rejecting leave request:",t)}finally{V(null)}},xe=async()=>{try{const s=await fetch("/api/branches",{credentials:"include"});if(s.ok){const t=await s.json();se(t)}}catch(s){console.error("Error fetching branches:",s)}},he=async()=>{F(!0);try{let s=`/api/attendance?date=${u}`;N!=="all"&&(s+=`&branchId=${N}`);const t=await fetch(s,{credentials:"include"});if(t.ok){const x=await t.json();W(x)}}catch(s){console.error("Error fetching attendance:",s)}finally{F(!1)}},n=K.filter(s=>!(b&&!s.employee?.fullName?.toLowerCase().includes(b.toLowerCase())&&!s.employee?.phone?.includes(b)||w!=="all"&&s.employee?.role!==w||k!=="all"&&s.status!==k)),j={total:n.length,present:n.filter(s=>s.status==="checked_in"||s.status==="checked_out").length,late:n.filter(s=>s.isLate===1).length,checkedOut:n.filter(s=>s.status==="checked_out").length,absent:n.filter(s=>s.status==="absent").length},o=s=>s?new Date(s).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"-",me=()=>{const s=n.map(a=>[a.employee?.fullName||"",a.employee?.jobTitle||"",a.branch?.nameAr||a.branch?.name||"",o(a.checkInTime),o(a.checkOutTime),a.status==="checked_out"?"انصرف":a.status==="checked_in"?"حاضر":"غائب",a.lateMinutes?a.lateMinutes:"-",a.isAtBranch===1?"في الفرع":"خارج الفرع",a.distanceFromBranch?Math.round(a.distanceFromBranch):0,a.checkOutIsAtBranch===1?"في الفرع":a.checkOutTime?"خارج الفرع":"-",a.checkOutDistanceFromBranch?Math.round(a.checkOutDistanceFromBranch):0]),t=["الاسم","الدور","الفرع","وقت الحضور","وقت الانصراف","الحالة","تأخير (دقيقة)","الموقع عند الحضور","المسافة (متر)","موقع الانصراف","مسافة الانصراف (متر)"],x=_.aoa_to_sheet([t,...s]),U=_.book_new();_.book_append_sheet(U,x,"سجل الحضور");const oe=`سجل_حضور_${u}.xlsx`;ke(U,oe)};return p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-background p-4",dir:"rtl",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-amber-700 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-accent",children:"سجل الحضور"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"إدارة حضور جميع الموظفين والمديرين"})]})]}),e.jsxs(r,{variant:"outline",onClick:()=>g("/manager/dashboard"),className:"border-primary/50 text-accent","data-testid":"button-back",children:[e.jsx(z,{className:"w-4 h-4 ml-2"}),"العودة"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsx(i,{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border-blue-500/20",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-400 text-2xl font-bold",children:j.total}),e.jsx("p",{className:"text-gray-400 text-xs",children:"إجمالي"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 border-green-500/20",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-400 text-2xl font-bold",children:j.present}),e.jsx("p",{className:"text-gray-400 text-xs",children:"حاضرون"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-orange-500/20 to-orange-600/10 border-accent/20",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-accent"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-accent text-2xl font-bold",children:j.late}),e.jsx("p",{className:"text-gray-400 text-xs",children:"متأخرون"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border-purple-500/20",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-400 text-2xl font-bold",children:j.checkedOut}),e.jsx("p",{className:"text-gray-400 text-xs",children:"انصرفوا"})]})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-red-500/20 to-red-600/10 border-red-500/20",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 text-2xl font-bold",children:j.absent}),e.jsx("p",{className:"text-gray-400 text-xs",children:"غياب"})]})]})})})]}),e.jsx(i,{className:"bg-gradient-to-br from-background to-background border-primary/20 mb-6",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Q,{placeholder:"بحث بالاسم أو الهاتف...",value:b,onChange:s=>ce(s.target.value),className:"pr-10 bg-[#1a1410] border-primary/20 text-white","data-testid":"input-search"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-accent"}),e.jsx(Q,{type:"date",value:u,onChange:s=>q(s.target.value),className:"bg-[#1a1410] border-primary/20 text-white w-40","data-testid":"input-date"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[(p.role==="admin"||p.role==="owner")&&e.jsxs(A,{value:N,onValueChange:te,children:[e.jsxs(B,{className:"w-40 bg-[#1a1410] border-primary/20 text-white","data-testid":"select-branch",children:[e.jsx(D,{className:"w-4 h-4 ml-2"}),e.jsx(T,{placeholder:"جميع الفروع"})]}),e.jsxs(O,{children:[e.jsx(c,{value:"all",children:"جميع الفروع"}),ee.map(s=>e.jsx(c,{value:s.id,children:s.nameAr||s.name},s.id))]})]}),e.jsxs(A,{value:w,onValueChange:ae,children:[e.jsxs(B,{className:"w-40 bg-[#1a1410] border-primary/20 text-white","data-testid":"select-role",children:[e.jsx(D,{className:"w-4 h-4 ml-2"}),e.jsx(T,{placeholder:"جميع الأدوار"})]}),e.jsxs(O,{children:[e.jsx(c,{value:"all",children:"جميع الأدوار"}),e.jsx(c,{value:"cashier",children:"كاشير"}),e.jsx(c,{value:"manager",children:"مدير"}),e.jsx(c,{value:"admin",children:"إدمن"})]})]}),e.jsxs(A,{value:k,onValueChange:le,children:[e.jsxs(B,{className:"w-40 bg-[#1a1410] border-primary/20 text-white","data-testid":"select-status",children:[e.jsx(D,{className:"w-4 h-4 ml-2"}),e.jsx(T,{placeholder:"جميع الحالات"})]}),e.jsxs(O,{children:[e.jsx(c,{value:"all",children:"جميع الحالات"}),e.jsx(c,{value:"checked_in",children:"حاضر"}),e.jsx(c,{value:"checked_out",children:"انصرف"}),e.jsx(c,{value:"late",children:"متأخر"}),e.jsx(c,{value:"absent",children:"غياب"})]})]}),e.jsxs(r,{onClick:me,className:"bg-background0 hover:bg-primary text-white","data-testid":"button-download-report",children:[e.jsx(be,{className:"w-4 h-4 ml-2"}),"تنزيل تقرير"]})]})]})})}),f.length>0&&e.jsxs(i,{className:"bg-gradient-to-br from-background to-background border-primary/20 mb-6",children:[e.jsx(X,{children:e.jsxs(H,{className:"text-accent flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"طلبات الجازات المعلقة"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs("div",{className:"bg-[#1a1410] rounded-lg p-4 border border-primary/10","data-testid":`leave-request-card-${s.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:s.employee?.fullName||"موظف غير معروف"}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.reason})]}),e.jsxs(h,{className:"bg-yellow-500/20 text-yellow-400",children:[s.numberOfDays," يوم"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"تاريخ البداية"}),e.jsxs("p",{className:"text-accent font-medium flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),new Date(s.startDate).toLocaleDateString("ar-SA")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"تاريخ النهاية"}),e.jsxs("p",{className:"text-accent font-medium flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),new Date(s.endDate).toLocaleDateString("ar-SA")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"تاريخ الطلب"}),e.jsx("p",{className:"text-gray-400 text-xs",children:new Date(s.createdAt).toLocaleDateString("ar-SA")})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:()=>ie(s.id),disabled:R===s.id,className:"bg-green-500/20 text-green-400 border border-green-500/50 hover:bg-green-500/30 flex-1","data-testid":`button-approve-leave-${s.id}`,children:[e.jsx(fe,{className:"w-4 h-4 ml-2"}),R===s.id?"جاري...":"موافقة"]}),e.jsxs(r,{onClick:()=>de(s.id),disabled:E===s.id,className:"bg-red-500/20 text-red-400 border border-red-500/50 hover:bg-red-500/30 flex-1","data-testid":`button-reject-leave-${s.id}`,children:[e.jsx(ye,{className:"w-4 h-4 ml-2"}),E===s.id?"جاري...":"رفض"]})]})]},s.id))})})]}),e.jsxs(i,{className:"bg-gradient-to-br from-background to-background border-primary/20",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(H,{className:"text-accent flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5"}),"سجلات الحضور"]}),e.jsx(ve,{value:M,onValueChange:s=>ne(s),children:e.jsxs(we,{className:"bg-[#1a1410]",children:[e.jsx(J,{value:"cards",children:"بطاقات"}),e.jsx(J,{value:"table",children:"جدول"})]})})]})}),e.jsx(d,{children:Z?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"جاري التحميل..."})]}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"w-12 h-12 text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400",children:"لا توجد سجلات حضور لهذا اليوم"})]}):M==="table"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"الاسم"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"الدور"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"الفرع"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"وقت الحضور"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"وقت الانصراف"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"الحالة"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"الموقع/المسافة"}),e.jsx("th",{className:"text-right py-3 px-4 text-accent",children:"الصور"})]})}),e.jsx("tbody",{children:n.map(s=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-[#2d1f1a]/50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.employee?.imageUrl?e.jsx("img",{src:s.employee.imageUrl,alt:s.employee.fullName,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 bg-background0/30 rounded-full flex items-center justify-center text-xs",children:s.employee?.fullName?.charAt(0)||"?"}),e.jsx("span",{className:"text-white",children:s.employee?.fullName||"موظف غير معروف"})]})}),e.jsx("td",{className:"py-3 px-4 text-gray-400",children:s.employee?.jobTitle||"موظف"}),e.jsx("td",{className:"py-3 px-4 text-gray-400 text-xs",children:s.branch?.nameAr||s.branch?.name||"-"}),e.jsx("td",{className:"py-3 px-4 text-green-400",children:o(s.checkInTime)}),e.jsx("td",{className:"py-3 px-4 text-accent",children:o(s.checkOutTime)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[s.isLate===1&&e.jsxs(h,{variant:"destructive",className:"text-xs",children:["تأخير ",s.lateMinutes,"د"]}),e.jsx(h,{className:s.status==="checked_out"?"bg-green-500/20 text-green-400":s.status==="checked_in"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400",children:s.status==="checked_out"?"انصرف":"حاضر"})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(h,{className:`text-xs ${s.isAtBranch===1?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.isAtBranch===1?"في الفرع":`${Math.round(s.distanceFromBranch||0)}م`})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[s.checkInPhoto&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>m(s.checkInPhoto),className:"text-accent p-0 h-auto text-xs","data-testid":`button-view-checkin-photo-${s.id}`,children:e.jsx(v,{className:"w-3 h-3"})}),s.checkOutPhoto&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>m(s.checkOutPhoto),className:"text-accent p-0 h-auto text-xs","data-testid":`button-view-checkout-photo-${s.id}`,children:e.jsx(v,{className:"w-3 h-3"})})]})})]},s.id))})]})}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"bg-[#1a1410] rounded-lg p-4 border border-primary/10","data-testid":`attendance-record-${s.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.employee?.imageUrl?e.jsx("img",{src:s.employee.imageUrl,alt:s.employee.fullName,className:"w-12 h-12 rounded-full object-cover border-2 border-primary/50"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-700 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:s.employee?.fullName?.charAt(0)||"?"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:s.employee?.fullName||"موظف غير معروف"}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.employee?.jobTitle||"موظف"}),(s.branch?.nameAr||s.branch?.name)&&e.jsxs("p",{className:"text-accent/70 text-xs flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),s.branch.nameAr||s.branch.name]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.isLate===1&&e.jsxs(h,{variant:"destructive",className:"text-xs",children:["تأخير ",s.lateMinutes," د"]}),e.jsx(h,{className:s.status==="checked_out"?"bg-green-500/20 text-green-400":s.status==="checked_in"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400",children:s.status==="checked_out"?"انصرف":"حاضر"})]}),s.isAtBranch!==void 0&&e.jsxs(h,{className:s.isAtBranch===1?"bg-green-500/20 text-green-400 text-xs":"bg-red-500/20 text-red-400 text-xs",children:[e.jsx(Y,{className:"w-3 h-3 ml-1"}),s.isAtBranch===1?"في الفرع":`خارج الفرع (${Math.round(s.distanceFromBranch||0)}م)`]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"وقت الحضور"}),e.jsxs("p",{className:"text-green-400 font-medium flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),o(s.checkInTime)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"موقع الحضور"}),s.isAtBranch!==void 0?e.jsx("p",{className:`font-medium flex items-center gap-1 ${s.isAtBranch===1?"text-green-400":"text-red-400"}`,children:s.isAtBranch===1?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-3 h-3"}),"في الفرع"]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-3 h-3"}),"بعيد (",Math.round(s.distanceFromBranch||0),"م)"]})}):e.jsx("span",{className:"text-gray-500",children:"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"صورة الحضور"}),s.checkInPhoto?e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>m(s.checkInPhoto),className:"text-accent p-0 h-auto","data-testid":`button-view-checkin-photo-${s.id}`,children:[e.jsx(v,{className:"w-3 h-3 ml-1"}),"عرض"]}):e.jsx("span",{className:"text-gray-500",children:"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"وقت الانصراف"}),e.jsxs("p",{className:"text-accent font-medium flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),o(s.checkOutTime)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"موقع الانصراف"}),s.checkOutTime&&s.checkOutIsAtBranch!==void 0?e.jsx("p",{className:`font-medium flex items-center gap-1 ${s.checkOutIsAtBranch===1?"text-green-400":"text-red-400"}`,children:s.checkOutIsAtBranch===1?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-3 h-3"}),"في الفرع"]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-3 h-3"}),"بعيد (",Math.round(s.checkOutDistanceFromBranch||0),"م)"]})}):e.jsx("span",{className:"text-gray-500",children:"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"صورة الانصراف"}),s.checkOutPhoto?e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>m(s.checkOutPhoto),className:"text-accent p-0 h-auto","data-testid":`button-view-checkout-photo-${s.id}`,children:[e.jsx(v,{className:"w-3 h-3 ml-1"}),"عرض"]}):e.jsx("span",{className:"text-gray-500",children:"-"})]})]})]},s.id))})})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>m(null),children:e.jsxs("div",{className:"max-w-lg w-full",children:[e.jsx("img",{src:$,alt:"صورة الحضور",className:"w-full rounded-lg"}),e.jsx(r,{variant:"outline",onClick:()=>m(null),className:"w-full mt-4 border-primary/50 text-accent","data-testid":"button-close-photo",children:"إغلاق"})]})})]})}):null}export{Ve as default};
