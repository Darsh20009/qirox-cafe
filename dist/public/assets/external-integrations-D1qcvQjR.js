import{j as e}from"./vendor-ui-DJm-zmnP.js";import{a as c,b as v}from"./vendor-query-CX8ZYlKb.js";import{l as u,e as w,c as k,B as t,g as A,C as l,x as d,y as o,O as C,f as m,V as x,L as h,I as S,v as L,N as E}from"./index-CLvpp2UE.js";import{S as I}from"./switch-C9eC4DLi.js";import{r as T}from"./vendor-react-Bzsngnqy.js";import{A as q}from"./activity-CtLuw4vZ.js";import{L as z}from"./link-2-C_6phh6p.js";import{R as K}from"./refresh-cw-BuGj2LMM.js";import{P as M}from"./package-B_dGuXgn.js";import{W as P}from"./warehouse-ByZ2zAAq.js";import"./vendor-utils-BKCsaWdX.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=u("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=u("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);function U(){const{toast:j}=w(),[,n]=k(),[p,g]=T.useState(""),{data:y=[]}=c({queryKey:["/api/integrations/delivery"]}),{data:f}=c({queryKey:["/api/integrations/delivery/mock-status"],refetchInterval:5e3}),N=v({mutationFn:async s=>(await L("POST","/api/integrations/delivery",s)).json(),onSuccess:()=>{E.invalidateQueries({queryKey:["/api/integrations/delivery"]}),j({title:"تم التفعيل بنجاح",className:"bg-green-600 text-white"})}}),b=[{id:"hungerstation",nameAr:"هنقرستيشن",nameEn:"HungerStation"},{id:"jahez",nameAr:"جاهز",nameEn:"Jahez"},{id:"toyou",nameAr:"تويو",nameEn:"ToYou"}];return e.jsxs("div",{className:"p-6 space-y-6 bg-background min-h-screen",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>n("/manager"),className:"hover:bg-primary/10",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"الربط مع تطبيقات التوصيل"}),e.jsx("p",{className:"text-muted-foreground",children:"قم بربط متجرك مع تطبيقات التوصيل العالمية لزيادة مبيعاتك"})]}),e.jsx(R,{className:"h-10 w-10 text-primary mr-auto"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:b.map(s=>{const a=y.find(r=>r.provider===s.id&&r.isActive),i=f?.[s.id];return e.jsxs(l,{className:`border-2 transition-all ${a?"border-green-500/50 shadow-lg shadow-green-500/10":"hover:border-primary"}`,children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-xl font-bold",children:s.nameAr}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-500/10 text-green-500 text-xs",children:[e.jsx(q,{className:"w-3 h-3 animate-pulse"}),"متصل"]}),e.jsx(C,{className:"h-6 w-6 text-primary"})]})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"mb-4",children:["ربط الطلبات آلياً مع ",s.nameAr," وتحديث حالة المخزون."]}),a&&i&&e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"p-2 rounded bg-muted",children:[e.jsx("span",{className:"text-muted-foreground block",children:"طلبات اليوم"}),e.jsx("span",{className:"font-bold",children:i.ordersToday||0})]}),e.jsxs("div",{className:"p-2 rounded bg-muted",children:[e.jsx("span",{className:"text-muted-foreground block",children:"وقت الاستجابة"}),e.jsx("span",{className:"font-bold",children:i.latency||"..."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{htmlFor:`${s.id}-active`,children:"حالة الربط"}),e.jsx(I,{id:`${s.id}-active`,checked:!!a})]}),!a&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{children:["مفتاح API الخاص بـ ",s.nameAr]}),e.jsx(S,{type:"password",placeholder:"أدخل المفتاح هنا...",onChange:r=>g(r.target.value)}),e.jsxs(t,{className:"w-full",onClick:()=>N.mutate({provider:s.id,apiKey:p,isActive:!0}),children:["تفعيل الربط ",e.jsx(z,{className:"mr-2 h-4 w-4"})]})]}),a&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{variant:"outline",className:"flex-1",children:["إعدادات ",e.jsx(H,{className:"mr-2 h-4 w-4"})]}),e.jsx(t,{variant:"ghost",size:"icon",children:e.jsx(K,{className:"w-4 h-4"})})]})]})]})]},s.id)})}),e.jsx("div",{className:"mt-10",children:e.jsxs(l,{className:"bg-muted/50 border-dashed",children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center",children:[e.jsx(M,{className:"ml-2 h-6 w-6 text-primary"})," مستودعات الإمداد"]}),e.jsx(x,{children:"هذه الميزة تمكنك من إدارة المخزون المركزي وتوزيعه على الفروع"})]}),e.jsxs(m,{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"تم تفعيل واجهة المستودعات المركزية لتمكين التحويل بين المخازن."}),e.jsxs(t,{onClick:()=>n("/manager/warehouse"),children:["إدارة المستودعات ",e.jsx(P,{className:"mr-2 h-4 w-4"})]})]})]})})]})}export{U as default};
